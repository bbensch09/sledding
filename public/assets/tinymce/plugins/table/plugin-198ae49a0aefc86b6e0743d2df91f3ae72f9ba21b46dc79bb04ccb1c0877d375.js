/**
 * Copyright (c) Tiny Technologies, Inc. All rights reserved.
 * Licensed under the LGPL or a commercial license.
 * For LGPL see License.txt in the project root for license information.
 * For commercial licenses see https://www.tiny.cloud/
 *
 * Version: 5.5.1 (2020-10-01)
 */
!function(){"use strict";function n(n){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];return function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var o=e.concat(t);return n.apply(null,o)}}function e(){for(var n=0,e=0,t=arguments.length;e<t;e++)n+=arguments[e].length;var r=Array(n),o=0;for(e=0;e<t;e++)for(var u=arguments[e],i=0,c=u.length;i<c;i++,o++)r[o]=u[i];return r}function t(n,e,t,r,o){return n(t,r)?E.some(t):W(o)&&o(t)?E.none():e(t,r,o)}function r(){return{up:S({selector:We,closest:Le,predicate:_e,all:we}),down:S({selector:je,predicate:ke}),styles:S({get:Ze,getRaw:et,set:Je,remove:tt}),attrs:S({get:Ue,set:qe,remove:Ge,copyTo:function(n,e){var t=Ke(n);Ve(e,t)}}),insert:S({before:kt,after:Mt,afterAll:Wt,append:jt,appendAll:zt,prepend:Nt,wrap:_t}),remove:S({unwrap:Ht,remove:Lt}),create:S({nu:Ln.fromTag,clone:function(n){return Ln.fromDom(n.dom.cloneNode(!1))},text:Ln.fromText}),query:S({comparePosition:function(n,e){return n.dom.compareDocumentPosition(e.dom)},prevSibling:ye,nextSibling:Ce}),property:S({children:Se,name:ae,parent:be,document:function(n){return ve(n).dom},isText:me,isComment:se,isElement:de,getText:Vt,setText:$t,isBoundary:function(n){return!!de(n)&&("body"===ae(n)||q(Gt,ae(n)))},isEmptyTag:function(n){return!!de(n)&&q(["br","img","hr","input"],ae(n))},isNonEditable:function(n){return de(n)&&"false"===Ue(n,"contenteditable")}}),eq:Vn,is:Gn}}function o(n,e){var t=function(t){var r=e(t);if(r<=0||null===r){var o=Ze(t,n);return parseFloat(o)||0}return r},r=function(n,e){return Y(e,function(e,t){var r=Ze(n,t),o=r===undefined?0:parseInt(r,10);return isNaN(o)?e:e+o},0)};return{set:function(e,t){if(!z(t)&&!t.match(/^[0-9]+$/))throw new Error(n+".set accepts only positive integer values. Value was "+t);var r=e.dom;Xe(r)&&(r.style[n]=t+"px")},get:t,getOuter:t,aggregate:r,max:function(n,e,t){var o=r(n,t);return o<e?e-o:0}}}function u(){var n=E.none(),e=Au({move:Ou(["info"])});return{onEvent:function(t,r){r.extract(t).each(function(t){var o,u,i;(o=r,u=t,i=n.map(function(n){return o.compare(n,u)}),n=E.some(u),i).each(function(n){e.trigger.move(n)})})},reset:function(){n=E.none()},events:e.registry}}function i(){var n={onEvent:C,reset:C},e=u(),t=n;return{on:function(){t.reset(),t=e},off:function(){t.reset(),t=n},isOn:function(){return t===e},onEvent:function(n,e){t.onEvent(n,e)},events:e.events}}function c(n,e,t,r){var o,u=(o=Xi(E.none()),{clear:function(){return o.set(E.none())},set:function(n){return o.set(E.some(n))},isSet:function(){return o.get().isSome()},on:function(n){return o.get().each(n)}}),i=u.clear;return{clearstate:i,mousedown:function(n){r.clear(e),Ks(n.target,t).each(u.set)},mouseover:function(o){u.on(function(u){r.clearBeforeUpdate(e),Ks(o.target,t).each(function(o){er(u,o,t).each(function(t){var i=t.boxes.getOr([]);(1<i.length||1===i.length&&!Vn(u,o))&&(r.selectRange(e,i,t.start,t.finish),n.selectContents(o))})})})},mouseup:function(){i()}}}function a(n,e,t){var r=ld.byAttr(_r,function(e,r,o){t.targets().each(function(t){pt(r).each(function(u){var i=Wi(n),c=kr(C,Ln.fromDom(n.getDoc()),i),a=fd(u,t,c);bi(n,e,r,o,a)})})},function(){return wi(n)});return n.on("init",function(){var t=n.getWin(),o=Fi(n),u=qi(n),i=ud(t,o,u,r),c=id(t,o,u,r),a=cd(t,o,u,r);n.on("TableSelectorChange",function(n){return a(n.start,n.finish)});var l,f,s=function(e,r){!0===e.raw.shiftKey&&(r.kill&&e.kill(),r.selection.each(function(e){var r=af.relative(e.start,e.finish),o=hf(t,r);n.selection.setRng(o)}))},d=function(n){return 0===n.button},m=(l=Xi(Ln.fromDom(o)),f=Xi(0),{touchEnd:function(n){var e,t,r=Ln.fromDom(n.target);"td"!==ae(r)&&"th"!==ae(r)||(e=l.get(),t=f.get(),Vn(e,r)&&n.timeStamp-t<300&&(n.preventDefault(),a(r,r))),l.set(r),f.set(n.timeStamp)}});n.on("dragstart",function(){i.clearstate()}),n.on("mousedown",function(n){d(n)&&sd(n)&&i.mousedown(Hu(n))}),n.on("mouseover",function(n){var e;((e=n).buttons===undefined||ql.browser.isEdge()&&0===e.buttons||0!=(1&e.buttons))&&sd(n)&&i.mouseover(Hu(n))}),n.on("mouseup",function(n){d(n)&&sd(n)&&i.mouseup(Hu(n))}),n.on("touchend",m.touchEnd),n.on("keyup",function(e){var t,r,o,u=Hu(e);u.raw.shiftKey&&nd(u.raw.which)&&(t=n.selection.getRng(),r=Ln.fromDom(t.startContainer),o=Ln.fromDom(t.endContainer),c.keyup(u,r,t.startOffset,o,t.endOffset).each(function(n){s(u,n)}))}),n.on("keydown",function(t){var r=Hu(t);e().each(function(n){return n.hideBars()});var o=n.selection.getRng(),u=Ln.fromDom(o.startContainer),i=Ln.fromDom(o.endContainer),a=Kr(ed,td)(Ln.fromDom(n.selection.getStart()));c.keydown(r,u,o.startOffset,i,o.endOffset,a).each(function(n){s(r,n)}),e().each(function(n){return n.showBars()})}),n.on("NodeChange",function(){var e=n.selection,t=Ln.fromDom(e.getStart()),u=Ln.fromDom(e.getEnd());Zt(pt,[t,u]).fold(function(){return r.clear(o)},C)})}),{clear:r.clear}}function l(n){var e=mr(function(){return Fi(n)},function(){return Qa(Ki(n))},_r.selectedSelector),t=dd(n,e),r=lc(n),o=a(n,r.lazyResize,t),u=el(n,r.lazyWire,e),i=Jl();return Xl(n,u,o,e,i),Yl(n,u,e),Fr(n,e,u,o),pd(n,t,i),md(n,t,i),gd(n),n.on("PreInit",function(){n.serializer.addTempAttr(_r.firstSelected),n.serializer.addTempAttr(_r.lastSelected),Zl(n)}),Oi(n)&&n.on("keydown",function(e){Xf(e,n,u)}),n.on("remove",function(){r.destroy()}),sl(n,i,r,t)}var f,s,d,m,g,p,h,v,b,w,y,C=function(){},S=function(n){return function(){return n}},x=function(n){return n},T=function(n){return function(e){return!n(e)}},R=S(!1),D=S(!0),O=function(){return A},A=(f=function(n){return n.isNone()},{fold:function(n){return n()},is:R,isSome:R,isNone:D,getOr:d=function(n){return n},getOrThunk:s=function(n){return n()},getOrDie:function(n){throw new Error(n||"error: getOrDie called on none.")},getOrNull:S(null),getOrUndefined:S(undefined),or:d,orThunk:s,map:O,each:C,bind:O,exists:R,forall:D,filter:O,equals:f,equals_:f,toArray:function(){return[]},toString:S("none()")}),B=function(n){var e=S(n),t=function(){return o},r=function(e){return e(n)},o={fold:function(e,t){return t(n)},is:function(e){return n===e},isSome:D,isNone:R,getOr:e,getOrThunk:e,getOrDie:e,getOrNull:e,getOrUndefined:e,or:t,orThunk:t,map:function(e){return B(e(n))},each:function(e){e(n)},bind:r,exists:r,forall:r,filter:function(e){return e(n)?o:A},toArray:function(){return[n]},toString:function(){return"some("+n+")"},equals:function(e){return e.is(n)},equals_:function(e,t){return e.fold(R,function(e){return t(n,e)})}};return o},E={some:B,none:O,from:function(n){return null===n||n===undefined?A:B(n)}},I=function(n){return function(e){return r=typeof(t=e),(null===t?"null":"object"==r&&(Array.prototype.isPrototypeOf(t)||t.constructor&&"Array"===t.constructor.name)?"array":"object"==r&&(String.prototype.isPrototypeOf(t)||t.constructor&&"String"===t.constructor.name)?"string":r)===n;var t,r}},P=function(n){return function(e){return typeof e===n}},k=I("string"),M=I("object"),N=I("array"),j=P("boolean"),_=function(n){return!(null===(e=n)||e===undefined);var e},W=P("function"),z=P("number"),F=Array.prototype.slice,L=Array.prototype.indexOf,H=Array.prototype.push,q=function(n,e){return t=n,r=e,-1<L.call(t,r);var t,r},V=function(n,e){for(var t=0,r=n.length;t<r;t++)if(e(n[t],t))return!0;return!1},U=function(n,e){for(var t=[],r=0;r<n;r++)t.push(e(r));return t},$=function(n,e){for(var t=n.length,r=new Array(t),o=0;o<t;o++){var u=n[o];r[o]=e(u,o)}return r},G=function(n,e){for(var t=0,r=n.length;t<r;t++)e(n[t],t)},K=function(n,e){for(var t=[],r=0,o=n.length;r<o;r++){var u=n[r];e(u,r)&&t.push(u)}return t},X=function(n,e,t){return function(n,e){for(var t=n.length-1;0<=t;t--)e(n[t],t)}(n,function(n){t=e(t,n)}),t},Y=function(n,e,t){return G(n,function(n){t=e(t,n)}),t},J=function(n,e){return function(n,e,t){for(var r=0,o=n.length;r<o;r++){var u=n[r];if(e(u,r))return E.some(u);if(t(u,r))break}return E.none()}(n,e,R)},Q=function(n,e){for(var t=0,r=n.length;t<r;t++)if(e(n[t],t))return E.some(t);return E.none()},Z=function(n){for(var e=[],t=0,r=n.length;t<r;++t){if(!N(n[t]))throw new Error("Arr.flatten item "+t+" was not an array, input: "+n);H.apply(e,n[t])}return e},nn=function(n,e){return Z($(n,e))},en=function(n,e){for(var t=0,r=n.length;t<r;++t)if(!0!==e(n[t],t))return!1;return!0},tn=function(n){return[n]},rn=function(n){return 0===n.length?E.none():E.some(n[n.length-1])},on=function(n,e){for(var t=0;t<n.length;t++){var r=e(n[t],t);if(r.isSome())return r}return E.none()},un=function(){return(un=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++)for(var o in e=arguments[t])Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o]);return n}).apply(this,arguments)},cn=function(n){var e,t=!1;return function(){for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];return t||(t=!0,e=n.apply(null,r)),e}},an=function(n,e){var t=function(n,e){for(var t=0;t<n.length;t++){var r=n[t];if(r.test(e))return r}return undefined}(n,e);if(!t)return{major:0,minor:0};var r=function(n){return Number(e.replace(t,"$"+n))};return fn(r(1),r(2))},ln=function(){return fn(0,0)},fn=function(n,e){return{major:n,minor:e}},sn={nu:fn,detect:function(n,e){var t=String(e).toLowerCase();return 0===n.length?ln():an(n,t)},unknown:ln},dn=function(n,e){var t=String(e).toLowerCase();return J(n,function(n){return n.search(t)})},mn=function(n,e){return dn(n,e).map(function(n){var t=sn.detect(n.versionRegexes,e);return{current:n.name,version:t}})},gn=function(n,e){return dn(n,e).map(function(n){var t=sn.detect(n.versionRegexes,e);return{current:n.name,version:t}})},pn=function(n,e,t){return""===e||n.length>=e.length&&n.substr(t,t+e.length)===e},hn=function(n,e){return-1!==n.indexOf(e)},vn=function(n,e){return pn(n,e,0)},bn=function(n,e){return pn(n,e,n.length-e.length)},wn=(m=/^\s+|\s+$/g,function(n){return n.replace(m,"")}),yn=function(n){return 0<n.length},Cn=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,Sn=function(n){return function(e){return hn(e,n)}},xn=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(n){return hn(n,"edge/")&&hn(n,"chrome")&&hn(n,"safari")&&hn(n,"applewebkit")}},{name:"Chrome",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Cn],search:function(n){return hn(n,"chrome")&&!hn(n,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(n){return hn(n,"msie")||hn(n,"trident")}},{name:"Opera",versionRegexes:[Cn,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:Sn("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:Sn("firefox")},{name:"Safari",versionRegexes:[Cn,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(n){return(hn(n,"safari")||hn(n,"mobile/"))&&hn(n,"applewebkit")}}],Tn=[{name:"Windows",search:Sn("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(n){return hn(n,"iphone")||hn(n,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:Sn("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:Sn("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:Sn("linux"),versionRegexes:[]},{name:"Solaris",search:Sn("sunos"),versionRegexes:[]},{name:"FreeBSD",search:Sn("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:Sn("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],Rn={browsers:S(xn),oses:S(Tn)},Dn="Firefox",On=function(n){var e=n.current,t=n.version,r=function(n){return function(){return e===n}};return{current:e,version:t,isEdge:r("Edge"),isChrome:r("Chrome"),isIE:r("IE"),isOpera:r("Opera"),isFirefox:r(Dn),isSafari:r("Safari")}},An={unknown:function(){return On({current:undefined,version:sn.unknown()})},nu:On,edge:S("Edge"),chrome:S("Chrome"),ie:S("IE"),opera:S("Opera"),firefox:S(Dn),safari:S("Safari")},Bn="Windows",En="Android",In="Solaris",Pn="FreeBSD",kn="ChromeOS",Mn=function(n){var e=n.current,t=n.version,r=function(n){return function(){return e===n}};return{current:e,version:t,isWindows:r(Bn),isiOS:r("iOS"),isAndroid:r(En),isOSX:r("OSX"),isLinux:r("Linux"),isSolaris:r(In),isFreeBSD:r(Pn),isChromeOS:r(kn)}},Nn={unknown:function(){return Mn({current:undefined,version:sn.unknown()})},nu:Mn,windows:S(Bn),ios:S("iOS"),android:S(En),linux:S("Linux"),osx:S("OSX"),solaris:S(In),freebsd:S(Pn),chromeos:S(kn)},jn=function(n,e){var t,r,o,u,i,c,a,l,f,s,d,m,g=Rn.browsers(),p=Rn.oses(),h=mn(g,n).fold(An.unknown,An.nu),v=gn(p,n).fold(Nn.unknown,Nn.nu);return{browser:h,os:v,deviceType:(r=h,o=n,u=e,i=(t=v).isiOS()&&!0===/ipad/i.test(o),c=t.isiOS()&&!i,a=t.isiOS()||t.isAndroid(),l=a||u("(pointer:coarse)"),f=i||!c&&a&&u("(min-device-width:768px)"),s=c||a&&!f,d=r.isSafari()&&t.isiOS()&&!1===/safari/i.test(o),m=!s&&!f&&!d,{isiPad:S(i),isiPhone:S(c),isTablet:S(f),isPhone:S(s),isTouch:S(l),isAndroid:t.isAndroid,isiOS:t.isiOS,isWebView:S(d),isDesktop:S(m)})}},_n=function(n){return window.matchMedia(n).matches},Wn=cn(function(){return jn(navigator.userAgent,_n)}),zn=function(){return Wn()},Fn=function(n){if(null===n||n===undefined)throw new Error("Node cannot be null or undefined");return{dom:n}},Ln={fromHtml:function(n,e){var t=(e||document).createElement("div");if(t.innerHTML=n,!t.hasChildNodes()||1<t.childNodes.length)throw console.error("HTML does not have a single root node",n),new Error("HTML must have a single root node");return Fn(t.childNodes[0])},fromTag:function(n,e){var t=(e||document).createElement(n);return Fn(t)},fromText:function(n,e){var t=(e||document).createTextNode(n);return Fn(t)},fromDom:Fn,fromPoint:function(n,e,t){return E.from(n.dom.elementFromPoint(e,t)).map(Fn)}},Hn=function(n,e){var t=n.dom;if(1!==t.nodeType)return!1;var r=t;if(r.matches!==undefined)return r.matches(e);if(r.msMatchesSelector!==undefined)return r.msMatchesSelector(e);if(r.webkitMatchesSelector!==undefined)return r.webkitMatchesSelector(e);if(r.mozMatchesSelector!==undefined)return r.mozMatchesSelector(e);throw new Error("Browser lacks native selectors")},qn=function(n){return 1!==n.nodeType&&9!==n.nodeType&&11!==n.nodeType||0===n.childElementCount},Vn=function(n,e){return n.dom===e.dom},Un=function(n,e){return t=n.dom,r=e.dom,o=Node.DOCUMENT_POSITION_CONTAINED_BY,0!=(t.compareDocumentPosition(r)&o);var t,r,o},$n=function(n,e){return zn().browser.isIE()?Un(n,e):(t=e,(r=n.dom)!==(o=t.dom)&&r.contains(o));var t,r,o},Gn=Hn,Kn=Object.keys,Xn=Object.hasOwnProperty,Yn=function(n,e){for(var t=Kn(n),r=0,o=t.length;r<o;r++){var u=t[r];e(n[u],u)}},Jn=function(n,e){return Qn(n,function(n,t){return{k:t,v:e(n,t)}})},Qn=function(n,e){var t={};return Yn(n,function(n,r){var o=e(n,r);t[o.k]=o.v}),t},Zn=function(n,e){var t,r,o,u,i={};return t=e,u=i,r=function(n,e){u[e]=n},o=C,Yn(n,function(n,e){(t(n,e)?r:o)(n,e)}),i},ne=function(n){return e=function(n){return n},t=[],Yn(n,function(n,r){t.push(e(n,r))}),t;var e,t},ee=function(n,e){return te(n,e)?E.from(n[e]):E.none()},te=function(n,e){return Xn.call(n,e)},re=["tfoot","thead","tbody","colgroup"],oe=function(n,e,t){return{element:n,rowspan:e,colspan:t}},ue=function(n,e,t){return{element:n,cells:e,section:t}},ie=function(n,e){return{element:n,isNew:e}},ce=function(n,e){return{cells:n,section:e}},ae=("undefined"!=typeof window||Function("return this;")(),function(n){return n.dom.nodeName.toLowerCase()}),le=function(n){return n.dom.nodeType},fe=function(n){return function(e){return le(e)===n}},se=function(n){return 8===le(n)||"#comment"===ae(n)},de=fe(1),me=fe(3),ge=fe(9),pe=fe(11),he=function(n){return Ln.fromDom(n.dom.ownerDocument)},ve=function(n){return ge(n)?n:he(n)},be=function(n){return E.from(n.dom.parentNode).map(Ln.fromDom)},we=function(n,e){for(var t=W(e)?e:R,r=n.dom,o=[];null!==r.parentNode&&r.parentNode!==undefined;){var u=r.parentNode,i=Ln.fromDom(u);if(o.push(i),!0===t(i))break;r=u}return o},ye=function(n){return E.from(n.dom.previousSibling).map(Ln.fromDom)},Ce=function(n){return E.from(n.dom.nextSibling).map(Ln.fromDom)},Se=function(n){return $(n.dom.childNodes,Ln.fromDom)},xe=function(n,e){var t=n.dom.childNodes;return E.from(t[e]).map(Ln.fromDom)},Te=W(Element.prototype.attachShadow)&&W(Node.prototype.getRootNode),Re=S(Te),De=Te?function(n){return Ln.fromDom(n.dom.getRootNode())}:ve,Oe=function(n){var e=De(n);return pe(e)?E.some(e):E.none()},Ae=function(n){return Ln.fromDom(n.dom.host)},Be=function(n){if(Re()&&_(n.target)){var e=Ln.fromDom(n.target);if(de(e)&&Ee(e)&&n.composed&&n.composedPath){var t=n.composedPath();if(t)return 0===(r=t).length?E.none():E.some(r[0])}}var r;return E.from(n.target)},Ee=function(n){return _(n.dom.shadowRoot)},Ie=function(n){var e=me(n)?n.dom.parentNode:n.dom;if(e===undefined||null===e||null===e.ownerDocument)return!1;var t,r,o=e.ownerDocument;return Oe(Ln.fromDom(e)).fold(function(){return o.body.contains(e)},(t=Ie,r=Ae,function(n){return t(r(n))}))},Pe=function(n){var e=n.dom.body;if(null===e||e===undefined)throw new Error("Body is not available yet");return Ln.fromDom(e)},ke=function(n,e){var t=[];return G(Se(n),function(n){e(n)&&(t=t.concat([n])),t=t.concat(ke(n,e))}),t},Me=function(n,e,t){return r=function(n){return Hn(n,e)},K(we(n,t),r);var r},Ne=function(n,e){return t=function(n){return Hn(n,e)},K(Se(n),t);var t},je=function(n,e){return t=e,o=(r=n)===undefined?document:r.dom,qn(o)?[]:$(o.querySelectorAll(t),Ln.fromDom);var t,r,o},_e=function(n,e,t){for(var r=n.dom,o=W(t)?t:R;r.parentNode;){r=r.parentNode;var u=Ln.fromDom(r);if(e(u))return E.some(u);if(o(u))break}return E.none()},We=function(n,e,t){return _e(n,function(n){return Hn(n,e)},t)},ze=function(n,e){return t=function(n){return Hn(n,e)},J(n.dom.childNodes,function(n){return t(Ln.fromDom(n))}).map(Ln.fromDom);var t},Fe=function(n,e){return t=e,o=(r=n)===undefined?document:r.dom,qn(o)?E.none():E.from(o.querySelector(t)).map(Ln.fromDom);var t,r,o},Le=function(n,e,r){return t(Hn,We,n,e,r)},He=function(n,e,t){if(!(k(t)||j(t)||z(t)))throw console.error("Invalid call to Attribute.set. Key ",e,":: Value ",t,":: Element ",n),new Error("Attribute value was not simple");n.setAttribute(e,t+"")},qe=function(n,e,t){He(n.dom,e,t)},Ve=function(n,e){var t=n.dom;Yn(e,function(n,e){He(t,e,n)})},Ue=function(n,e){var t=n.dom.getAttribute(e);return null===t?undefined:t},$e=function(n,e){return E.from(Ue(n,e))},Ge=function(n,e){n.dom.removeAttribute(e)},Ke=function(n){return Y(n.dom.attributes,function(n,e){return n[e.name]=e.value,n},{})},Xe=function(n){return n.style!==undefined&&W(n.style.getPropertyValue)},Ye=function(n,e,t){if(!k(t))throw console.error("Invalid call to CSS.set. Property ",e,":: Value ",t,":: Element ",n),new Error("CSS value must be a string: "+t);Xe(n)&&n.style.setProperty(e,t)},Je=function(n,e,t){var r=n.dom;Ye(r,e,t)},Qe=function(n,e){var t=n.dom;Yn(e,function(n,e){Ye(t,e,n)})},Ze=function(n,e){var t=n.dom,r=window.getComputedStyle(t).getPropertyValue(e);return""!==r||Ie(n)?r:nt(t,e)},nt=function(n,e){return Xe(n)?n.style.getPropertyValue(e):""},et=function(n,e){var t=n.dom,r=nt(t,e);return E.from(r).filter(function(n){return 0<n.length})},tt=function(n,e){var t,r,o=n.dom;r=e,Xe(t=o)&&t.style.removeProperty(r),$e(n,"style").map(wn).is("")&&Ge(n,"style")},rt=function(n,e,t){return void 0===t&&(t=0),$e(n,e).map(function(n){return parseInt(n,10)}).getOr(t)},ot=function(n,e){return rt(n,e,1)},ut=function(n){return 1<ot(n,"colspan")},it=function(n){return 1<ot(n,"rowspan")},ct=function(n,e){return parseInt(Ze(n,e),10)},at=S(10),lt=S(10),ft=function(n,e){return st(n,e,D)},st=function(n,e,t){return nn(Se(n),function(n){return Hn(n,e)?t(n)?[n]:[]:st(n,e,t)})},dt=function(n,e){return function(n,e,t){return void 0===t&&(t=R),t(e)?E.none():q(n,ae(e))?E.some(e):We(e,n.join(","),function(n){return Hn(n,"table")||t(n)})}(["td","th"],n,e)},mt=function(n){return ft(n,"th,td")},gt=function(n){return ft(n,"col")},pt=function(n,e){return Le(n,"table",e)},ht=function(n){return ft(n,"tr")},vt=function(n,e){return $(n,function(n){if("colgroup"===ae(n)){var t=$(gt(n),function(n){var e=rt(n,"span",1);return oe(n,1,e)});return ue(n,t,"colgroup")}return t=$(mt(n),function(n){var e=rt(n,"rowspan",1),t=rt(n,"colspan",1);return oe(n,e,t)}),ue(n,t,e(n))})},bt=function(n){return be(n).map(function(n){var e=ae(n);return q(re,e)?e:"tbody"}).getOr("tbody")},wt=function(n){var t=ht(n),r=e(ft(n,"colgroup"),t);return vt(r,bt)},yt=function(n,e){return n+","+e},Ct=function(n,e){var t=nn(n.all,function(n){return n.cells});return K(t,e)},St=function(n){var e={},t=[],r={},o=0,u=0,i=0;return G(n,function(n){var c,a,l;"colgroup"===n.section?(a={},l=0,G(n.cells,function(n){var e=n.colspan;U(e,function(t){var r=l+t;a[r]={element:n.element,colspan:e,column:r}}),l+=e}),r=a):(c=[],G(n.cells,function(n){for(var t=0;e[yt(i,t)]!==undefined;)t++;for(var r={element:n.element,rowspan:n.rowspan,colspan:n.colspan,row:i,column:t},o=0;o<n.colspan;o++)for(var a=0;a<n.rowspan;a++){var l=t+o,f=yt(i+a,l);e[f]=r,u=Math.max(u,l+1)}c.push(r)}),o++,t.push(ue(n.element,c,n.section)),i++)}),{grid:{rows:o,columns:u},access:e,all:t,columns:r}},xt={fromTable:function(n){var e=wt(n);return St(e)},generate:St,getAt:function(n,e,t){var r=n.access[yt(e,t)];return r!==undefined?E.some(r):E.none()},findItem:function(n,e,t){var r=Ct(n,function(n){return t(e,n.element)});return 0<r.length?E.some(r[0]):E.none()},filterItems:Ct,justCells:function(n){return nn(n.all,function(n){return n.cells})},justColumns:function(n){return ne(n.columns)},hasColumns:function(n){return 0<Kn(n.columns).length},getColumnAt:function(n,e){return E.from(n.columns[e])}},Tt=function(n,e){var t=e.column,r=e.column+e.colspan-1,o=e.row,u=e.row+e.rowspan-1;return t<=n.finishCol&&r>=n.startCol&&o<=n.finishRow&&u>=n.startRow},Rt=function(n,e){return e.column>=n.startCol&&e.column+e.colspan-1<=n.finishCol&&e.row>=n.startRow&&e.row+e.rowspan-1<=n.finishRow},Dt=function(n,e,t){var r=xt.findItem(n,e,Vn),o=xt.findItem(n,t,Vn);return r.bind(function(n){return o.map(function(e){return t=n,r=e,{startRow:Math.min(t.row,r.row),startCol:Math.min(t.column,r.column),finishRow:Math.max(t.row+t.rowspan-1,r.row+r.rowspan-1),finishCol:Math.max(t.column+t.colspan-1,r.column+r.colspan-1)};var t,r})})},Ot=function(e,t,r){return Dt(e,t,r).bind(function(t){return function(e,t){for(var r=!0,o=n(Rt,t),u=t.startRow;u<=t.finishRow;u++)for(var i=t.startCol;i<=t.finishCol;i++)r=r&&xt.getAt(e,u,i).exists(o);return r?E.some(t):E.none()}(e,t)})},At=function(e,t,r){return Dt(e,t,r).map(function(t){var r=xt.filterItems(e,n(Tt,t));return $(r,function(n){return n.element})})},Bt=function(n,e){return xt.findItem(n,e,function(n,e){return $n(e,n)}).map(function(n){return n.element})},Et=function(n,e,t){return pt(n).bind(function(r){var o,u,i,c,a=Pt(r);return o=a,u=n,i=e,c=t,xt.findItem(o,u,Vn).bind(function(n){var e=0<i?n.row+n.rowspan-1:n.row,t=0<c?n.column+n.colspan-1:n.column;return xt.getAt(o,e+i,t+c).map(function(n){return n.element})})})},It=function(n,e,t,r,o){var u=Pt(n),i=Vn(n,t)?E.some(e):Bt(u,e),c=Vn(n,o)?E.some(r):Bt(u,r);return i.bind(function(n){return c.bind(function(e){return At(u,n,e)})})},Pt=xt.fromTable,kt=function(n,e){be(n).each(function(t){t.dom.insertBefore(e.dom,n.dom)})},Mt=function(n,e){Ce(n).fold(function(){be(n).each(function(n){jt(n,e)})},function(n){kt(n,e)})},Nt=function(n,e){xe(n,0).fold(function(){jt(n,e)},function(t){n.dom.insertBefore(e.dom,t.dom)})},jt=function(n,e){n.dom.appendChild(e.dom)},_t=function(n,e){kt(n,e),jt(e,n)},Wt=function(n,e){G(e,function(t,r){var o=0===r?n:e[r-1];Mt(o,t)})},zt=function(n,e){G(e,function(e){jt(n,e)})},Ft=function(n){n.dom.textContent="",G(Se(n),function(n){Lt(n)})},Lt=function(n){var e=n.dom;null!==e.parentNode&&e.parentNode.removeChild(e)},Ht=function(n){var e,t=Se(n);0<t.length&&(e=n,G(t,function(n){kt(e,n)})),Lt(n)},qt=(g=me,p="text",{get:function(n){if(!g(n))throw new Error("Can only get "+p+" value of a "+p+" node");return h(n).getOr("")},getOption:h=function(n){return g(n)?E.from(n.dom.nodeValue):E.none()},set:function(n,e){if(!g(n))throw new Error("Can only set raw "+p+" value of a "+p+" node");n.dom.nodeValue=e}}),Vt=function(n){return qt.get(n)},Ut=function(n){return qt.getOption(n)},$t=function(n,e){return qt.set(n,e)},Gt=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","li","table","thead","tbody","tfoot","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],Kt=function(n,e,t,r){var o=e(n,t);return X(r,function(t,r){var o=e(n,r);return Xt(n,t,o)},o)},Xt=function(e,t,r){return t.bind(function(t){return r.filter(n(e.eq,t))})},Yt=function(n,e,t){return 0<t.length?Kt(n,e,(r=t)[0],r.slice(1)):E.none();var r},Jt=function(e,t,r,o){void 0===o&&(o=R);var u=[t].concat(e.up().all(t)),i=[r].concat(e.up().all(r)),c=function(n){return Q(n,o).fold(function(){return n},function(e){return n.slice(0,e+1)})},a=c(u),l=c(i),f=J(a,function(t){return V(l,(r=t,n(e.eq,r)));var r});return{firstpath:a,secondpath:l,shared:f}},Qt=r(),Zt=function(n,e){return Yt(Qt,function(e,t){return n(t)},e)},nr=function(n){return We(n,"table")},er=function(n,e,t){var r=function(n){return function(e){return t!==undefined&&t(e)||Vn(e,n)}};return Vn(n,e)?E.some({boxes:E.some([n]),start:n,finish:e}):nr(n).bind(function(o){return nr(e).bind(function(u){if(Vn(o,u))return E.some({boxes:(f=n,s=e,d=Pt(o),At(d,f,s)),start:n,finish:e});if($n(o,u)){var i=0<(c=Me(e,"td,th",r(o))).length?c[c.length-1]:e;return E.some({boxes:It(o,n,o,e,u),start:n,finish:i})}if($n(u,o)){var c,a=0<(c=Me(n,"td,th",r(u))).length?c[c.length-1]:n;return E.some({boxes:It(u,n,o,e,u),start:n,finish:a})}return Jt(Qt,n,e,l).shared.bind(function(i){return Le(i,"table",t).bind(function(t){var i=Me(e,"td,th",r(t)),c=0<i.length?i[i.length-1]:e,a=Me(n,"td,th",r(t)),l=0<a.length?a[a.length-1]:n;return E.some({boxes:It(t,n,o,e,u),start:l,finish:c})})});var l,f,s,d})})},tr=function(n,e){var t=je(n,e);return 0<t.length?E.some(t):E.none()},rr=function(n,e,t){return Fe(n,e).bind(function(e){return Fe(n,t).bind(function(n){return Zt(nr,[e,n]).map(function(t){return{first:e,last:n,table:t}})})})},or=function(n,e,t,r,o){return u=o,J(n,function(n){return Hn(n,u)}).bind(function(n){return Et(n,e,t).bind(function(n){return t=r,We(e=n,"table").bind(function(n){return Fe(n,t).bind(function(n){return er(n,e).bind(function(n){return n.boxes.map(function(e){return{boxes:e,start:n.start,finish:n.finish}})})})});var e,t})});var u},ur=tr,ir=function(n,e,t){return rr(n,e,t).bind(function(e){var t=function(e){return Vn(n,e)},r="thead,tfoot,tbody,table",o=We(e.first,r,t),u=We(e.last,r,t);return o.bind(function(n){return u.bind(function(t){return Vn(n,t)?(r=e.table,o=e.first,u=e.last,i=Pt(r),Ot(i,o,u)):E.none();var r,o,u,i})})})},cr=function(n){if(!N(n))throw new Error("cases must be an array");if(0===n.length)throw new Error("there must be at least one case");var e=[],t={};return G(n,function(r,o){var u=Kn(r);if(1!==u.length)throw new Error("one and only one name per case");var i=u[0],c=r[i];if(t[i]!==undefined)throw new Error("duplicate key detected:"+i);if("cata"===i)throw new Error("cannot have a case named cata (sorry)");if(!N(c))throw new Error("case arguments must be an array");e.push(i),t[i]=function(){var t=arguments.length;if(t!==c.length)throw new Error("Wrong number of arguments to case "+i+". Expected "+c.length+" ("+c+"), got "+t);for(var r=new Array(t),u=0;u<r.length;u++)r[u]=arguments[u];return{fold:function(){if(arguments.length!==n.length)throw new Error("Wrong number of arguments to fold. Expected "+n.length+", got "+arguments.length);return arguments[o].apply(null,r)},match:function(n){var t=Kn(n);if(e.length!==t.length)throw new Error("Wrong number of arguments to match. Expected: "+e.join(",")+"\nActual: "+t.join(","));if(!en(e,function(n){return q(t,n)}))throw new Error("Not all branches were specified when using match. Specified: "+t.join(", ")+"\nRequired: "+e.join(", "));return n[i].apply(null,r)},log:function(n){console.log(n,{constructors:e,constructor:i,params:r})}}}}),t},ar=cr([{none:[]},{multiple:["elements"]},{single:["element"]}]),lr=function(n,e,t,r){return n.fold(e,t,r)},fr=ar.none,sr=ar.multiple,dr=ar.single,mr=function(n,e,t){return{get:function(){return ur(n(),t).fold(function(){return e().map(dr).getOrThunk(fr)},function(n){return sr(n)})}}},gr=tinymce.util.Tools.resolve("tinymce.PluginManager"),pr=function(n,e,t,r){for(var o,u,i,c=e.grid.columns,a=e.grid.rows,l=0;l<a;l++)for(var f=!1,s=0;s<c;s++)l<t.minRow||l>t.maxRow||s<t.minCol||s>t.maxCol||(xt.getAt(e,l,s).filter(r).isNone()?(o=f,u=n[l].element,i=Ln.fromTag("td"),jt(i,Ln.fromTag("br")),(o?jt:Nt)(u,i)):f=!0)},hr=function(n,e){var t,r,o,u,i,c,a,l,f,s,d=function(n){return Hn(n.element,e)},m=wt(n),g=xt.generate(m),p=(r=d,o=(t=g).grid.columns,u=t.grid.rows,i=o,a=c=0,Yn(t.access,function(n){var e,t,o,l;r(n)&&(t=(e=n.row)+n.rowspan-1,l=(o=n.column)+n.colspan-1,e<u?u=e:c<t&&(c=t),o<i?i=o:a<l&&(a=l))}),{minRow:u,minCol:i,maxRow:c,maxCol:a}),h="th:not("+e+"),td:not("+e+")",v=st(n,"th,td",function(n){return Hn(n,h)});return G(v,Lt),pr(m,g,p,d),f=p,s=K(ft(l=n,"tr"),function(n){return 0===n.dom.childElementCount}),G(s,Lt),f.minCol!==f.maxCol&&f.minRow!==f.maxRow||G(ft(l,"th,td"),function(n){Ge(n,"rowspan"),Ge(n,"colspan")}),Ge(l,"width"),Ge(l,"height"),tt(l,"width"),tt(l,"height"),n},vr=function(n){return"img"===ae(n)?1:Ut(n).fold(function(){return Se(n).length},function(n){return n.length})},br=["img","br"],wr=function(n){return Ut(n).filter(function(n){return 0!==n.trim().length||-1<n.indexOf("\xa0")}).isSome()||q(br,ae(n))},yr=function(n){return e=wr,(t=function(n){for(var r=0;r<n.childNodes.length;r++){var o=Ln.fromDom(n.childNodes[r]);if(e(o))return E.some(o);var u=t(n.childNodes[r]);if(u.isSome())return u}return E.none()})(n.dom);var e,t},Cr=function(n){return Sr(n,wr)},Sr=function(n,e){var t=function(n){for(var r=Se(n),o=r.length-1;0<=o;o--){var u=r[o];if(e(u))return E.some(u);var i=t(u);if(i.isSome())return i}return E.none()};return t(n)},xr=function(n,e){return Ln.fromDom(n.dom.cloneNode(e))},Tr=function(n){return xr(n,!1)},Rr=function(n){return xr(n,!0)},Dr=function(n,e){var t,r,o,u,i=(t=n,r=e,o=Ln.fromTag(r),u=Ke(t),Ve(o,u),o),c=Se(Rr(n));return zt(i,c),i},Or=function(){var n=Ln.fromTag("td");return jt(n,Ln.fromTag("br")),n},Ar=function(){return Ln.fromTag("col")},Br=function(){return Ln.fromTag("colgroup")},Er=function(n,e,t){var r=Dr(n,e);return Yn(t,function(n,e){null===n?Ge(r,e):qe(r,e,n)}),r},Ir=function(n){return n},Pr=function(n){return function(){return Ln.fromTag("tr",n.dom)}},kr=function(n,e,t){var r=function(n,e){var t,r,o;t=e,r=n.element.dom,o=t.dom,Xe(r)&&Xe(o)&&(o.style.cssText=r.style.cssText),tt(e,"height"),1!==n.colspan&&tt(n.element,"width")};return{col:function(e){var t=he(e.element),o=Ln.fromTag(ae(e.element),t.dom);return r(e,o),n(e.element,o),o},colgroup:Br,row:Pr(e),cell:function(e){var o,u,i,c=he(e.element),a=Ln.fromTag(ae(e.element),c.dom),l=t.getOr(["strong","em","b","i","span","font","h1","h2","h3","h4","h5","h6","p","div"]),f=0<l.length?(o=e.element,u=a,i=l,yr(o).map(function(n){var e=i.join(","),t=Me(n,e,function(n){return Vn(n,o)});return X(t,function(n,e){var t=Tr(e);return Ge(t,"contenteditable"),jt(n,t),t},u)}).getOr(u)):a;return jt(f,Ln.fromTag("br")),r(e,a),n(e.element,a),a},replace:Er,gap:Or}},Mr=function(n){return{col:Ar,colgroup:Br,row:Pr(n),cell:Or,replace:Ir,gap:Or}},Nr=function(n){return $(n,Ln.fromDom)},jr=function(n){return lr(n.get(),S([]),x,tn)},_r={selected:"data-mce-selected",selectedSelector:"td[data-mce-selected],th[data-mce-selected]",firstSelected:"data-mce-first-selected",firstSelectedSelector:"td[data-mce-first-selected],th[data-mce-first-selected]",lastSelected:"data-mce-last-selected",lastSelectedSelector:"td[data-mce-last-selected],th[data-mce-last-selected]"},Wr=function(n){return{element:n,mergable:E.none(),unmergable:E.none(),selection:[n]}},zr=function(n,e,t){return{element:t,mergable:(u=e,i=_r,lr(n.get(),E.none,function(n){return n.length<=1?E.none():ir(u,i.firstSelectedSelector,i.lastSelectedSelector).map(function(e){return{bounds:e,cells:n}})},E.none)),unmergable:(r=function(n,e){return $e(n,e).exists(function(n){return 1<parseInt(n,10)})},0<(o=jr(n)).length&&en(o,function(n){return r(n,"rowspan")||r(n,"colspan")})?E.some(o):E.none()),selection:jr(n)};var r,o,u,i},Fr=function(n,e,t,r){n.on("BeforeGetContent",function(t){!0===t.selection&&lr(e.get(),C,function(e){t.preventDefault(),pt(e[0]).map(Rr).map(function(n){return[hr(n,"[data-mce-selected]")]}).each(function(e){var r;t.content="text"===t.format?$(e,function(n){return n.dom.innerText}).join(""):(r=n,$(e,function(n){return r.selection.serializer.serialize(n.dom,{})}).join(""))})},C)}),n.on("BeforeSetContent",function(e){!0===e.selection&&!0===e.paste&&E.from(n.dom.getParent(n.selection.getStart(),"th,td")).each(function(o){var u=Ln.fromDom(o)
;pt(u).each(function(o){var i,c,a,l,f,s,d,m=K((i=e.content,(a=(c||document).createElement("div")).innerHTML=i,Se(Ln.fromDom(a))),function(n){return"meta"!==ae(n)});1===m.length&&(d=m[0],"table"===ae(d))&&(e.preventDefault(),l=Ln.fromDom(n.getDoc()),f=Mr(l),s={element:u,clipboard:m[0],generators:f},t.pasteCells(o,s).each(function(e){n.selection.setRng(e),n.focus(),r.clear(o)}))})})})},Lr=cr([{none:[]},{only:["index"]},{left:["index","next"]},{middle:["prev","index","next"]},{right:["prev","index"]}]),Hr=un({},Lr),qr=function(n,e,t,r,o){var u,i,c=n.slice(0),a=(i=e,0===(u=n).length?Hr.none():1===u.length?Hr.only(0):0===i?Hr.left(0,1):i===u.length-1?Hr.right(i-1,i):0<i&&i<u.length-1?Hr.middle(i-1,i,i+1):Hr.none()),l=S($(c,S(0)));return a.fold(l,function(n){return r.singleColumnWidth(c[n],t)},function(n,e){return o.calcLeftEdgeDeltas(c,n,e,t,r.minCellWidth(),r.isRelative)},function(n,e,u){return o.calcMiddleDeltas(c,n,e,u,t,r.minCellWidth(),r.isRelative)},function(n,e){return o.calcRightEdgeDeltas(c,n,e,t,r.minCellWidth(),r.isRelative)})},Vr=function(n){var e=n.grid,t=U(e.columns,x),r=U(e.rows,x);return $(t,function(e){return Ur(function(){return nn(r,function(t){return xt.getAt(n,t,e).filter(function(n){return n.column===e}).toArray()})},function(n){return 1===n.colspan},function(){return xt.getAt(n,0,e)})})},Ur=function(n,e,t){var r=n();return J(r,e).orThunk(function(){return E.from(r[0]).orThunk(t)}).map(function(n){return n.element})},$r=function(n){var e=n.grid,t=U(e.rows,x),r=U(e.columns,x);return $(t,function(e){return Ur(function(){return nn(r,function(t){return xt.getAt(n,e,t).filter(function(n){return n.row===e}).fold(S([]),function(n){return[n]})})},function(n){return 1===n.rowspan},function(){return xt.getAt(n,e,0)})})},Gr=function(n,e){if(e<0||e>=n.length-1)return E.none();var t=n[e].fold(function(){var t,r,o=(t=n.slice(0,e),(r=F.call(t,0)).reverse(),r);return on(o,function(n,e){return n.map(function(n){return{value:n,delta:e+1}})})},function(n){return E.some({value:n,delta:0})}),r=n[e+1].fold(function(){var t=n.slice(e+1);return on(t,function(n,e){return n.map(function(n){return{value:n,delta:e+1}})})},function(n){return E.some({value:n,delta:1})});return t.bind(function(n){return r.map(function(e){var t=e.delta+n.delta;return Math.abs(e.value-n.value)/t})})},Kr=function(n,e){return function(t){return"rtl"===Xr(t)?e:n}},Xr=function(n){return"rtl"===Ze(n,"direction")?"rtl":"ltr"},Yr=o("height",function(n){var e=n.dom;return Ie(n)?e.getBoundingClientRect().height:e.offsetHeight}),Jr=function(n){return Yr.get(n)},Qr=function(n){return Yr.getOuter(n)},Zr=function(n,e){return{left:n,top:e,translate:function(t,r){return Zr(n+t,e+r)}}},no=Zr,eo=function(n,e){return n!==undefined?n:e!==undefined?e:0},to=function(n){var e=n.dom.ownerDocument,t=e.body,r=e.defaultView,o=e.documentElement;if(t===n.dom)return no(t.offsetLeft,t.offsetTop);var u=eo(null==r?void 0:r.pageYOffset,o.scrollTop),i=eo(null==r?void 0:r.pageXOffset,o.scrollLeft),c=eo(o.clientTop,t.clientTop),a=eo(o.clientLeft,t.clientLeft);return ro(n).translate(i-a,u-c)},ro=function(n){var e,t=n.dom,r=t.ownerDocument.body;return r===t?no(r.offsetLeft,r.offsetTop):Ie(n)?(e=t.getBoundingClientRect(),no(e.left,e.top)):no(0,0)},oo=o("width",function(n){return n.dom.offsetWidth}),uo=function(n){return oo.get(n)},io=function(n){return oo.getOuter(n)},co=function(n,e){return{row:n,y:e}},ao=function(n,e){return{col:n,x:e}},lo=function(n){return to(n).left+io(n)},fo=function(n){return to(n).left},so=function(n,e){return ao(n,fo(e))},mo=function(n,e){return ao(n,lo(e))},go=function(n){return to(n).top},po=function(n,e){return co(n,go(e))},ho=function(n,e){return co(n,go(e)+Qr(e))},vo=function(n,e,t){if(0===t.length)return[];var r=$(t.slice(1),function(e,t){return e.map(function(e){return n(t,e)})}),o=t[t.length-1].map(function(n){return e(t.length-1,n)});return r.concat([o])},bo={delta:x,positions:function(n){return vo(po,ho,n)},edge:go},wo=Kr({delta:x,edge:fo,positions:function(n){return vo(so,mo,n)}},{delta:function(n){return-n},edge:lo,positions:function(n){return vo(mo,so,n)}}),yo={delta:function(n,e){return wo(e).delta(n,e)},positions:function(n,e){return wo(e).positions(n,e)},edge:function(n){return wo(n).edge(n)}},Co={unsupportedLength:["em","ex","cap","ch","ic","rem","lh","rlh","vw","vh","vi","vb","vmin","vmax","cm","mm","Q","in","pc","pt","px"],fixed:["px","pt"],relative:["%"],empty:[""]},So=(b="[eE][+-]?[0-9]+",y=["Infinity",(v="[0-9]+")+"\\."+(w=function(n){return"(?:"+n+")?"})(v)+w(b),"\\."+v+w(b),v+w(b)].join("|"),new RegExp("^([+-]?(?:"+y+"))(.*)$")),xo=function(n,e){return E.from(So.exec(n)).bind(function(n){var t,r=Number(n[1]),o=n[2];return t=o,V(e,function(n){return V(Co[n],function(n){return t===n})})?E.some({value:r,unit:o}):E.none()})},To=function(){var n=zn().browser;return n.isIE()||n.isEdge()},Ro=function(n,e,t){return r=Ze(n,e),o=t,u=parseFloat(r),isNaN(u)?o:u;var r,o,u},Do=function(n){return To()?(t=(e=n).dom.getBoundingClientRect().height,"border-box"===Ze(e,"box-sizing")?t:t-Ro(e,"padding-top",0)-Ro(e,"padding-bottom",0)-(Ro(e,"border-top-width",0)+Ro(e,"border-bottom-width",0))):Ro(n,"height",Jr(n));var e,t},Oo=function(n){return To()?(t=(e=n).dom.getBoundingClientRect().width,"border-box"===Ze(e,"box-sizing")?t:t-Ro(e,"padding-left",0)-Ro(e,"padding-right",0)-(Ro(e,"border-left-width",0)+Ro(e,"border-right-width",0))):Ro(n,"width",uo(n));var e,t},Ao=/(\d+(\.\d+)?)%/,Bo=/(\d+(\.\d+)?)px|em/,Eo=function(n,e){var t,r=(t=n,E.from(t.dom.offsetParent).map(Ln.fromDom).getOr(Pe(he(n))));return e(n)/e(r)*100},Io=function(n,e){Je(n,"width",e+"px")},Po=function(n,e){Je(n,"width",e+"%")},ko=function(n,e){Je(n,"height",e+"px")},Mo=function(n,e,t,r){var o,u,i,c,a,l=parseInt(n,10);return bn(n,"%")&&"table"!==ae(e)?(u=l,i=t,c=r,a=pt(o=e).map(function(n){var e=i(n);return Math.floor(u/100*e)}).getOr(u),c(o,a),a):l},No=function(n){var e,t=et(e=n,"height").getOrThunk(function(){return Do(e)+"px"});return t?Mo(t,n,Jr,ko):Jr(n)},jo=function(n){return et(n,"width").fold(function(){return E.from(Ue(n,"width"))},function(n){return E.some(n)})},_o=function(n,e){return n/e.pixelWidth()*100},Wo=function(n,e){return jo(n).fold(function(){var t=uo(n);return _o(t,e)},function(t){return function(n,e,t){var r=Ao.exec(e);if(null!==r)return parseFloat(r[1]);var o=Oo(n);return _o(o,t)}(n,t,e)})},zo=function(n,e){return jo(n).fold(function(){return Oo(n)},function(t){return function(n,e,t){var r=Bo.exec(e);if(null!==r)return parseInt(r[1],10);var o=Ao.exec(e);return null===o?Oo(n):parseFloat(o[1])/100*t.pixelWidth()}(n,t,e)})},Fo=function(n){return t="rowspan",No(e=n)/ot(e,t);var e,t},Lo=function(n,e,t){Je(n,"width",e+t)},Ho=function(n){return Eo(n,uo)+"%"},qo=S(Ao),Vo=S(Bo),Uo=function(n,e,t){return et(n,e).fold(function(){return t(n)+"px"},function(n){return n})},$o=function(n,e){return Uo(n,"width",function(n){return zo(n,e)})},Go=function(n){return Uo(n,"height",Fo)},Ko=function(n,e,t,r){var o,u=xt.hasColumns(n)?(o=n,$(xt.justColumns(o),function(n){return E.from(n.element)})):Vr(n),i=$(u,function(n){return n.map(yo.edge)});return $(u,function(n,o){return n.filter(T(ut)).fold(function(){var n=Gr(i,o);return t(n)},function(n){return e(n,r)})})},Xo=function(n){return n.map(function(n){return n+"px"}).getOr("")},Yo=function(n,e){return Ko(n,Wo,function(n){return n.fold(function(){return e.minCellWidth()},function(n){return n/e.pixelWidth()*100})},e)},Jo=function(n,e){return Ko(n,zo,function(n){return n.getOrThunk(e.minCellWidth)},e)},Qo=function(n,e,t,r){var o=$r(n),u=$(o,function(n){return n.map(e.edge)});return $(o,function(n,e){return n.filter(T(it)).fold(function(){var n=Gr(u,e);return r(n)},function(n){return t(n)})})},Zo=function(n,e,t){for(var r=0,o=n;o<e;o++)r+=t[o]!==undefined?t[o]:0;return r},nu=function(n,e){return xt.hasColumns(n)?(u=n,i=e,c=xt.justColumns(u),$(c,function(n,e){return{element:n.element,width:i[e],colspan:n.colspan}})):(t=n,r=e,o=xt.justCells(t),$(o,function(n){var e=Zo(n.column,n.column+n.colspan,r);return{element:n.element,width:e,colspan:n.colspan}}));var t,r,o,u,i,c},eu=function(n,e,t){var r=nu(n,e);G(r,function(n){t.setElementWidth(n.element,n.width)})},tu=function(n,e,t,r,o){var u=xt.fromTable(n),i=o.getCellDelta(e),c=o.getWidths(u,o),a=t===u.grid.columns-1,l=r.clampTableDelta(c,t,i,o.minCellWidth(),a),f=qr(c,t,l,o,r),s=$(f,function(n,e){return n+c[e]});eu(u,s,o),r.resizeTable(o.adjustTableWidth,l,a)},ru=function(n,e,t,r){var o,u,i,c,a=xt.fromTable(n),l=Qo(a,r,Fo,function(n){return n.getOrThunk(lt)}),f=$(l,function(n,r){return t===r?Math.max(e+n,lt()):n}),s=(o=a,u=f,i=xt.justCells(o),$(i,function(n){var e=Zo(n.row,n.row+n.rowspan,u);return{element:n.element,height:e,rowspan:n.rowspan}})),d=(c=f,$(a.all,function(n,e){return{element:n.element,height:c[e]}}));G(d,function(n){ko(n.element,n.height)}),G(s,function(n){ko(n.element,n.height)});var m=X(f,function(n,e){return n+e},0);ko(n,m)},ou=function(n){return $(n,S(0))},uu=function(n,e,t,r,o){return o(n.slice(0,e)).concat(r).concat(o(n.slice(t)))},iu=function(n){return function(e,t,r,o){if(n(r)){var u=Math.max(o,e[t]-Math.abs(r)),i=Math.abs(u-e[t]);return 0<=r?i:-i}return r}},cu=iu(function(n){return n<0}),au=iu(D),lu=function(){var n=function(n,e,t,r){var o=(100+t)/100,u=Math.max(r,(n[e]+t)/o);return $(n,function(n,t){return(t===e?u:n/o)-n})},e=function(e,t,r,o,u,i){return i?n(e,t,o,u):(l=r,f=cu(c=e,a=t,o,u),uu(c,a,l+1,[f,0],ou));var c,a,l,f};return{resizeTable:function(n,e){return n(e)},clampTableDelta:cu,calcLeftEdgeDeltas:e,calcMiddleDeltas:function(n,t,r,o,u,i,c){return e(n,r,o,u,i,c)},calcRightEdgeDeltas:function(e,t,r,o,u,i){if(i)return n(e,r,o,u);var c=cu(e,r,o,u);return ou(e.slice(0,r)).concat([c])}}},fu=function(n){var e=E.from(n.dom.documentElement).map(Ln.fromDom).getOr(n);return{parent:S(e),view:S(n),origin:S(no(0,0))}},su=function(n,e){return{parent:S(e),view:S(n),origin:S(no(0,0))}},du=cr([{invalid:["raw"]},{pixels:["value"]},{percent:["value"]}]),mu=function(n,e,t){var r=t.substring(0,t.length-n.length),o=parseFloat(r);return r===o.toString()?e(o):du.invalid(t)},gu=un(un({},du),{from:function(n){return bn(n,"%")?mu("%",du.percent,n):bn(n,"px")?mu("px",du.pixels,n):du.invalid(n)}}),pu=function(n,e,t){return n.fold(function(){return e},function(n){return o=(r=n)/t,$(e,function(n){return gu.from(n).fold(function(){return n},function(n){return n*o+"px"},function(n){return n/100*r+"px"})});var r,o},function(){return n=t,$(e,function(e){return gu.from(e).fold(function(){return e},function(e){return e/n*100+"%"},function(n){return n+"%"})});var n})},hu=function(n,e,t){var r,o,u,i=gu.from(t),c=en(n,function(n){return"0px"===n})?(r=i,o=n.length,u=r.fold(function(){return S("")},function(n){return S(n/o+"px")},function(){return S(100/o+"%")}),U(o,u)):pu(i,n,e);return bu(c)},vu=function(n,e){return 0===n.length?e:X(n,function(n,e){return gu.from(e).fold(S(0),x,x)+n},0)},bu=function(n){if(0===n.length)return n;var e,t,r=X(n,function(n,e){var t=gu.from(e).fold(function(){return{value:e,remainder:0}},function(n){return e=n,t="px",{value:(r=Math.floor(e))+t,remainder:e-r};var e,t,r},function(n){return{value:n+"%",remainder:0}});return{output:[t.value].concat(n.output),remainder:n.remainder+t.remainder}},{output:[],remainder:0}),o=r.output;return o.slice(0,o.length-1).concat([(e=o[o.length-1],t=Math.round(r.remainder),gu.from(e).fold(S(e),function(n){return n+t+"px"},function(n){return n+t+"%"}))])},wu=gu.from,yu=function(n){return wu(n).fold(S("px"),S("px"),S("%"))},Cu=function(n,e,t,r){var o=xt.fromTable(n),u=o.all,i=xt.justCells(o),c=xt.justColumns(o);e.each(function(e){var t,u,a,l,f=yu(e),s=uo(n),d=Ko(o,$o,Xo,r),m=hu(d,s,e);xt.hasColumns(o)?(a=m,l=f,G(c,function(n,e){var t=vu([a[e]],at());Je(n.element,"width",t+l)})):(t=m,u=f,G(i,function(n){var e=t.slice(n.column,n.colspan+n.column),r=vu(e,at());Je(n.element,"width",r+u)})),Je(n,"width",e)}),t.each(function(e){var t,r,c,a=yu(e),l=Jr(n),f=Qo(o,bo,Go,Xo),s=hu(f,l,e);t=s,r=u,c=a,G(i,function(n){var e=t.slice(n.row,n.rowspan+n.row),r=vu(e,lt());Je(n.element,"height",r+c)}),G(r,function(n,e){Je(n.element,"height",t[e])}),Je(n,"height",e)})},Su=function(n){return jo(n).exists(function(n){return Ao.test(n)})},xu=function(n){return jo(n).exists(function(n){return Bo.test(n)})},Tu=function(n){return jo(n).isNone()},Ru=Ho,Du=function(n){return xt.fromTable(n).grid},Ou=function(n){var e=[];return{bind:function(n){if(n===undefined)throw new Error("Event bind error: undefined handler");e.push(n)},unbind:function(n){e=K(e,function(e){return e!==n})},trigger:function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var o={};G(n,function(n,e){o[n]=t[e]}),G(e,function(n){n(o)})}}},Au=function(n){return{registry:Jn(n,function(n){return{bind:n.bind,unbind:n.unbind}}),trigger:Jn(n,function(n){return n.trigger})}},Bu=function(n){return n.slice(0).sort()},Eu=function(n,e,t){if(0===e.length)throw new Error("You must specify at least one required field.");var r;return function(n,e){if(!N(e))throw new Error("The "+n+" fields must be an array. Was: "+e+".");G(e,function(e){if(!k(e))throw new Error("The value "+e+" in the "+n+" fields was not a string.")})}("required",e),r=Bu(e),J(r,function(n,e){return e<r.length-1&&n===r[e+1]}).each(function(n){throw new Error("The field: "+n+" occurs more than once in the combined fields: ["+r.join(", ")+"].")}),function(r){var o=Kn(r);en(e,function(n){return q(o,n)})||function(n,t){throw new Error("All required keys ("+Bu(e).join(", ")+") were not specified. Specified keys were: "+Bu(t).join(", ")+".")}(0,o),n(e,o);var u=K(e,function(n){return!t.validate(r[n],n)});return 0<u.length&&function(n,e){throw new Error("All values need to be of type: "+e+". Keys ("+Bu(n).join(", ")+") were not.")}(u,t.label),r}},Iu=function(n,e){var t=K(e,function(e){return!q(n,e)});0<t.length&&function(){throw new Error("Unsupported keys for object: "+Bu(t).join(", "))}()},Pu=function(n){return Eu(Iu,n,{validate:W,label:"function"})},ku=Pu(["compare","extract","mutate","sink"]),Mu=Pu(["element","start","stop","destroy"]),Nu=Pu(["forceDrop","drop","move","delayDrop"]),ju=function(n,e,t){var r,o,u,c=!1,a=Au({start:Ou([]),stop:Ou([])}),l=i(),f=function(){m.stop(),l.isOn()&&(l.off(),a.trigger.stop())},s=(r=f,o=200,u=null,{cancel:function(){null!==u&&(clearTimeout(u),u=null)},throttle:function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];null!==u&&clearTimeout(u),u=setTimeout(function(){r.apply(null,n),u=null},o)}});l.events.move.bind(function(t){e.mutate(n,t.info)});var d=function(n){return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];c&&n.apply(null,e)}},m=e.sink(Nu({forceDrop:f,drop:d(f),move:d(function(n){s.cancel(),l.onEvent(n,e)}),delayDrop:d(s.throttle)}),t);return{element:m.element,go:function(n){m.start(n),l.on(),a.trigger.start()},on:function(){c=!0},off:function(){c=!1},destroy:function(){m.destroy()},events:a.registry}},_u=function(n){var e,t,r=Ln.fromDom(Be(n).getOr(n.target)),o=function(){return n.stopPropagation()},u=function(){return n.preventDefault()},i=(e=u,t=o,function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return e(t.apply(null,n))});return{target:r,x:n.clientX,y:n.clientY,stop:o,prevent:u,kill:i,raw:n}},Wu=function(e,t,r,o,u){var i,c,a=(i=r,c=o,function(n){i(n)&&c(_u(n))});return e.dom.addEventListener(t,a,u),{unbind:n(zu,e,t,a,u)}},zu=function(n,e,t,r){n.dom.removeEventListener(e,t,r)},Fu=D,Lu=function(n,e,t){return Wu(n,e,Fu,t,!1)},Hu=_u,qu=function(n,e){var t=Ue(n,e);return t===undefined||""===t?[]:t.split(" ")},Vu=function(n){return n.dom.classList!==undefined},Uu=function(n,e){return o=e,u=qu(t=n,r="class").concat([o]),qe(t,r,u.join(" ")),!0;var t,r,o,u},$u=function(n,e){return o=e,0<(u=K(qu(t=n,r="class"),function(n){return n!==o})).length?qe(t,r,u.join(" ")):Ge(t,r),!1;var t,r,o,u},Gu=function(n,e){Vu(n)?n.dom.classList.add(e):Uu(n,e)},Ku=function(n){0===(Vu(n)?n.dom.classList:qu(n,"class")).length&&Ge(n,"class")},Xu=function(n,e){return Vu(n)&&n.dom.classList.contains(e)},Yu=function(n){var e=n.replace(/\./g,"-");return{resolve:function(n){return e+"-"+n}}},Ju=Yu("ephox-dragster").resolve,Qu=ku({compare:function(n,e){return no(e.left-n.left,e.top-n.top)},extract:function(n){return E.some(no(n.x,n.y))},sink:function(n,e){var t=function(n){var e=un({layerClass:Ju("blocker")},n),t=Ln.fromTag("div");return qe(t,"role","presentation"),Qe(t,{position:"fixed",left:"0px",top:"0px",width:"100%",height:"100%"}),Gu(t,Ju("blocker")),Gu(t,e.layerClass),{element:function(){return t},destroy:function(){Lt(t)}}}(e),r=Lu(t.element(),"mousedown",n.forceDrop),o=Lu(t.element(),"mouseup",n.drop),u=Lu(t.element(),"mousemove",n.move),i=Lu(t.element(),"mouseout",n.delayDrop);return Mu({element:t.element,start:function(n){jt(n,t.element())},stop:function(){Lt(t.element())},destroy:function(){t.destroy(),o.unbind(),u.unbind(),i.unbind(),r.unbind()}})},mutate:function(n,e){n.mutate(e.left,e.top)}}),Zu=function(n){return"true"===Ue(n,"contenteditable")},ni=Yu("ephox-snooker").resolve,ei=function(){var n,e=Au({drag:Ou(["xDelta","yDelta","target"])}),t=E.none(),r={mutate:function(e,t){n.trigger.drag(e,t)},events:(n=Au({drag:Ou(["xDelta","yDelta"])})).registry};return r.events.drag.bind(function(n){t.each(function(t){e.trigger.drag(n.xDelta,n.yDelta,t)})}),{assign:function(n){t=E.some(n)},get:function(){return t},mutate:r.mutate,events:e.registry}},ti=ni("resizer-bar"),ri=ni("resizer-rows"),oi=ni("resizer-cols"),ui=function(n){var e=je(n.parent(),"."+ti);G(e,Lt)},ii=function(n,e,t){var r=n.origin();G(e,function(e){e.each(function(e){var o=t(r,e);Gu(o,ti),jt(n.parent(),o)})})},ci=function(n,e,t,r){ii(n,e,function(n,e){var o,u,i,c,a,l,f=(o=e.col,u=e.x-n.left,i=t.top-n.top,c=7,a=r,l=Ln.fromTag("div"),Qe(l,{position:"absolute",left:u-c/2+"px",top:i+"px",height:a+"px",width:c+"px"}),Ve(l,{"data-column":o,role:"presentation"}),l);return Gu(f,oi),f})},ai=function(n,e,t,r){ii(n,e,function(n,e){var o,u,i,c,a,l,f=(o=e.row,u=t.left-n.left,i=e.y-n.top,c=r,a=7,l=Ln.fromTag("div"),Qe(l,{position:"absolute",left:u+"px",top:i-a/2+"px",height:a+"px",width:c+"px"}),Ve(l,{"data-row":o,role:"presentation"}),l);return Gu(f,ri),f})},li=function(n,e){ui(n);var t=xt.fromTable(e);!function(n,e,t,r){var o=to(e),u=0<t.length?bo.positions(t,e):[];ai(n,u,o,io(e));var i=0<r.length?yo.positions(r,e):[];ci(n,i,o,Qr(e))}(n,e,$r(t),Vr(t))},fi=function(n,e){var t=je(n.parent(),"."+ti);G(t,e)},si=function(n){fi(n,function(n){Je(n,"display","none")})},di=function(n){fi(n,function(n){Je(n,"display","block")})},mi=ni("resizer-bar-dragging"),gi=function(e){var t=ei(),r=function(n,e){void 0===e&&(e={});var t=e.mode!==undefined?e.mode:Qu;return ju(n,t,e)}(t,{}),o=E.none(),u=function(n,e){return E.from(Ue(n,e))};t.events.drag.bind(function(n){u(n.target,"data-row").each(function(){var e=ct(n.target,"top");Je(n.target,"top",e+n.yDelta+"px")}),u(n.target,"data-column").each(function(){var e=ct(n.target,"left");Je(n.target,"left",e+n.xDelta+"px")})});var i=function(n,e){return ct(n,e)-rt(n,"data-initial-"+e,0)};r.events.stop.bind(function(){t.get().each(function(n){o.each(function(t){u(n,"data-row").each(function(e){var r=i(n,"top");Ge(n,"data-initial-top"),d.trigger.adjustHeight(t,r,parseInt(e,10))}),u(n,"data-column").each(function(e){var r=i(n,"left");Ge(n,"data-initial-left"),d.trigger.adjustWidth(t,r,parseInt(e,10))}),li(e,t)})})});var c=function(n,o){d.trigger.startAdjust(),t.assign(n),qe(n,"data-initial-"+o,ct(n,o)),Gu(n,mi),Je(n,"opacity","0.2"),r.go(e.parent())},a=Lu(e.parent(),"mousedown",function(n){var e,t;e=n.target,Xu(e,ri)&&c(n.target,"top"),t=n.target,Xu(t,oi)&&c(n.target,"left")}),l=function(n){return Vn(n,e.view())},f=function(n){return Le(n,"table",l).filter(function(n){return Le(n,"[contenteditable]",l).exists(Zu)})},s=Lu(e.view(),"mouseover",function(n){f(n.target).fold(function(){Ie(n.target)&&ui(e)},function(n){o=E.some(n),li(e,n)})}),d=Au({adjustHeight:Ou(["table","delta","row"]),adjustWidth:Ou(["table","delta","column"]),startAdjust:Ou([])});return{destroy:function(){a.unbind(),s.unbind(),r.destroy(),ui(e)},refresh:function(n){li(e,n)},on:r.on,off:r.off,hideBars:n(si,e),showBars:n(di,e),events:d.registry}},pi=function(n,e,t){var r=bo,o=yo,u=gi(n),i=Au({beforeResize:Ou(["table","type"]),afterResize:Ou(["table","type"]),startDrag:Ou([])});return u.events.adjustHeight.bind(function(n){var e=n.table;i.trigger.beforeResize(e,"row");var t=r.delta(n.delta,e);ru(e,t,n.row,r),i.trigger.afterResize(e,"row")}),u.events.startAdjust.bind(function(){i.trigger.startDrag()}),u.events.adjustWidth.bind(function(n){var r=n.table;i.trigger.beforeResize(r,"col");var u=o.delta(n.delta,r),c=t(r);tu(r,u,n.column,e,c),i.trigger.afterResize(r,"col")}),{on:u.on,off:u.off,hideBars:u.hideBars,showBars:u.showBars,destroy:u.destroy,events:i.registry}},hi=function(n,e){return n.fire("newrow",{node:e})},vi=function(n,e){return n.fire("newcell",{node:e})},bi=function(n,e,t,r,o){n.fire("TableSelectionChange",{cells:e,start:t,finish:r,otherCells:o})},wi=function(n){n.fire("TableSelectionClear")},yi={"border-collapse":"collapse",width:"100%"},Ci={border:"1"},Si="preservetable",xi=function(n){return n.getParam("table_sizing_mode","auto")},Ti=function(n){return n.getParam("table_responsive_width")},Ri=function(n){return n.getParam("table_default_attributes",Ci,"object")},Di=function(n){return n.getParam("table_default_styles",function(n){if(ki(n)){var e=n.getBody().offsetWidth;return un(un({},yi),{width:e+"px"})}return Mi(n)?Zn(yi,function(n,e){return"width"!==e}):yi}(n),"object")},Oi=function(n){return n.getParam("table_tab_navigation",!0,"boolean")},Ai=function(n){return n.getParam("table_cell_advtab",!0,"boolean")},Bi=function(n){return n.getParam("table_row_advtab",!0,"boolean")},Ei=function(n){return n.getParam("table_advtab",!0,"boolean")},Ii=function(n){return n.getParam("table_style_by_css",!1,"boolean")},Pi=function(n){return"relative"===xi(n)||!0===Ti(n)},ki=function(n){return"fixed"===xi(n)||!1===Ti(n)},Mi=function(n){return"responsive"===xi(n)},Ni=function(n){var e="section",t=n.getParam("table_header_type",e,"string");return q(["section","cells","sectionCells","auto"],t)?t:e},ji=function(n){var e=n.getParam("table_column_resizing",Si,"string");return J(["preservetable","resizetable"],function(n){return n===e}).getOr(Si)},_i=function(n){return"preservetable"===ji(n)},Wi=function(n){var e=n.getParam("table_clone_elements");return k(e)?E.some(e.split(/[ ,]/)):Array.isArray(e)?E.some(e):E.none()},zi=function(n){return n.nodeName.toLowerCase()},Fi=function(n){return Ln.fromDom(n.getBody())},Li=function(n){return n.getBoundingClientRect().width},Hi=function(n){return n.getBoundingClientRect().height},qi=function(n){return function(e){return Vn(e,Fi(n))}},Vi=function(n){return/^\d+(\.\d+)?$/.test(n)?n+"px":n},Ui=function(n){Ge(n,"data-mce-style");var e=function(n){return Ge(n,"data-mce-style")};G(mt(n),e),G(gt(n),e)},$i=function(n,e){var t=n.dom.getStyle(e,"width")||n.dom.getAttrib(e,"width");return E.from(t).filter(yn)},Gi=function(n){return/^(\d+(\.\d+)?)%$/.test(n)},Ki=function(n){return Ln.fromDom(n.selection.getStart())},Xi=function(n){var e=n;return{get:function(){return e},set:function(n){e=n}}},Yi=function(n){var e=function(){return uo(n)},t=S(0);return{width:e,pixelWidth:e,getWidths:Jo,getCellDelta:t,singleColumnWidth:S([0]),minCellWidth:t,setElementWidth:C,adjustTableWidth:C,isRelative:!0,label:"none"}},Ji=function(n,e){var t=Xi(parseFloat(n)),r=Xi(uo(e));return{width:t.get,pixelWidth:r.get,getWidths:Yo,getCellDelta:function(n){return n/r.get()*100},singleColumnWidth:function(n){return[100-n]},minCellWidth:function(){return at()/r.get()*100},setElementWidth:Po,adjustTableWidth:function(n){var o=t.get(),u=o+n/100*o;Po(e,u),t.set(u),r.set(uo(e))},isRelative:!0,label:"percent"}},Qi=function(n,e){var t=Xi(n),r=t.get;return{width:r,pixelWidth:r,getWidths:Jo,getCellDelta:x,singleColumnWidth:function(n,e){return[Math.max(at(),n+e)-n]},minCellWidth:at,setElementWidth:Io,adjustTableWidth:function(n){var o=r()+n;Io(e,o),t.set(o)},isRelative:!1,label:"pixel"}},Zi=function(n){return jo(n).fold(function(){return Yi(n)},function(e){return function(n,e){var t=qo().exec(e);if(null!==t)return Ji(t[1],n);var r=Vo().exec(e);if(null!==r){var o=parseInt(r[1],10);return Qi(o,n)}var u=uo(n);return Qi(u,n)}(n,e)})},nc=Qi,ec=Ji,tc=function(n,e){if(Pi(n)){var t=$i(n,e.dom).filter(Gi).getOrThunk(function(){return Ru(e)});return ec(t,e)}return ki(n)?nc(uo(e),e):Zi(e)},rc=function(n){Ge(n,"width")},oc=function(n,e){var t=uo(n)+"px";Cu(n,E.some(t),E.none(),e),rc(n)},uc=function(n,e){var t,r,o;r=tc(n,e),o=Ho(t=e),Cu(t,E.some(o),E.none(),r),rc(t)},ic=function(n,e){var t=tc(n,e);oc(e,t)},cc=function(n){tt(n,"width");var e=gt(n),t=0<e.length?e:mt(n);G(t,function(n){tt(n,"width"),rc(n)}),rc(n)},ac=function(){var n=Ln.fromTag("div");return Qe(n,{position:"static",height:"0",width:"0",padding:"0",margin:"0",border:"0"}),jt(Pe(Ln.fromDom(document)),n),n},lc=function(n){var e,t,r=E.none(),o=E.none(),u=E.none(),i=function(n){return"TABLE"===n.nodeName},c=function(){return o},a=function(e){return tc(n,e)},l=function(){return _i(n)?{resizeTable:function(n,e,t){t&&n(e)},clampTableDelta:function(n,e,t,r,o){if(o){if(0<=t)return t;var u=Y(n,function(n,e){return n+e-r},0);return Math.max(-u,t)}return cu(n,e,t,r)},calcLeftEdgeDeltas:e=function(n,e,t,r,o){var u=au(n,0<=r?t:e,r,o);return uu(n,e,t+1,[u,-u],ou)},calcMiddleDeltas:function(n,t,r,o,u,i){return e(n,r,o,u,i)},calcRightEdgeDeltas:function(n,e,t,r,o,u){if(u)return ou(n);var i=r/n.length;return $(n,S(i))}}:lu();var e},f=function(r,o,u){var i,c,f,s,d,m,g=bn(o,"e");u!==e&&""!==t?(Je(r,"width",t),i=l(),c=a(r),f=_i(n)||g?Du(r).columns-1:0,tu(r,u-e,f,i,c)):Gi(t)&&(s=parseFloat(t.replace("%","")),Je(r,"width",u*s/e+"%")),/^(\d+(\.\d+)?)px$/.test(t)&&(d=r,m=xt.fromTable(d),xt.hasColumns(m)||G(mt(d),function(n){var e=Ze(n,"width");Je(n,"width",e),Ge(n,"width")}))};return n.on("init",function(){var e,t,i,c,f=(e=n).inline?su(Fi(e),ac()):fu(Ln.fromDom(e.getDoc()));u=E.some(f),c=n.getParam("object_resizing",!0),(k(c)?"table"===c:c)&&n.getParam("table_resize_bars",!0,"boolean")&&(t=l(),(i=pi(f,t,a)).on(),i.events.startDrag.bind(function(){r=E.some(n.selection.getRng())}),i.events.beforeResize.bind(function(e){var t,r,o,u,i,c=e.table.dom;t=n,o=Li(r=c),u=Hi(c),i="bar-"+e.type,t.fire("ObjectResizeStart",{target:r,width:o,height:u,origin:i})}),i.events.afterResize.bind(function(e){var t,o,u,i,c,a=e.table,l=a.dom;Ui(a),r.each(function(e){n.selection.setRng(e),n.focus()}),t=n,u=Li(o=l),i=Hi(l),c="bar-"+e.type,t.fire("ObjectResized",{target:o,width:u,height:i,origin:c}),n.undoManager.add()}),o=E.some(i))}),n.on("ObjectResizeStart",function(r){var o,u=r.target;i(u)&&(o=Ln.fromDom(u),G(n.dom.select(".mce-clonedresizable"),function(e){n.dom.addClass(e,"mce-"+ji(n)+"-columns")}),!xu(o)&&ki(n)?ic(n,o):!Su(o)&&Pi(n)&&uc(n,o),e=r.width,t=Mi(n)?"":$i(n,u).getOr(""))}),n.on("ObjectResized",function(e){var r,o,u=e.target;i(u)&&(r=Ln.fromDom(u),""===t&&uc(n,r),o=e.origin,vn(o,"corner-")&&f(r,o,e.width),Ui(r))}),n.on("SwitchMode",function(){o.each(function(e){n.mode.isReadOnly()?e.hideBars():e.showBars()})}),{lazyResize:c,lazyWire:function(){return u.getOr(fu(Ln.fromDom(n.getBody())))},destroy:function(){o.each(function(n){n.destroy()}),u.each(function(e){var t;t=e,n.inline&&Lt(t.parent())})}}},fc=function(n,e){return{element:n,offset:e}},sc=function(n,e,t){return n.property().isText(e)&&0===n.property().getText(e).trim().length||n.property().isComment(e)?t(e).bind(function(e){return sc(n,e,t).orThunk(function(){return E.some(e)})}):E.none()},dc=function(n,e){return n.property().isText(e)?n.property().getText(e).length:n.property().children(e).length},mc=function(n,e){var t=sc(n,e,n.query().prevSibling).getOr(e);if(n.property().isText(t))return fc(t,dc(n,t));var r=n.property().children(t);return 0<r.length?mc(n,r[r.length-1]):fc(t,dc(n,t))},gc=mc,pc=r(),hc=function(n,e){jo(n).bind(function(n){return xo(n,["fixed","relative","empty"])}).each(function(t){var r=t.value/2;Lo(n,r,t.unit),Lo(e,r,t.unit)})},vc=function(n,e,t){n.cells[e]=t},bc=function(n,e){return ce(e,n.section)},wc=function(n,e){var t=n.cells,r=$(t,e);return ce(r,n.section)},yc=function(n,e){return n.cells[e]},Cc=function(n,e){return yc(n,e).element},Sc=function(n){return n.cells.length},xc=function(n){var e=function(n,e){for(var t=[],r=[],o=0,u=n.length;o<u;o++){var i=n[o];(e(i,o)?t:r).push(i)}return{pass:t,fail:r}}(n,function(n){return"colgroup"===n.section});return{rows:e.fail,cols:e.pass}},Tc=function(n){for(var e=[],t=function(n){e.push(n)},r=0;r<n.length;r++)n[r].each(t);return e},Rc=function(n,e,t,r){t===r?Ge(n,e):qe(n,e,t)},Dc=function(n,e,t){rn(Ne(n,e)).fold(function(){return Nt(n,t)},function(n){return Mt(n,t)})},Oc=function(n,e){var t=[],r=[],o=function(n){return $(n,function(n){n.isNew&&t.push(n.element);var e=n.element;return Ft(e),G(n.cells,function(n){n.isNew&&r.push(n.element),Rc(n.element,"colspan",n.colspan,1),Rc(n.element,"rowspan",n.rowspan,1),jt(e,n.element)}),e})},u=function(n){return nn(n,function(n){return $(n.cells,function(n){return Rc(n.element,"span",n.colspan,1),n.element})})},i=function(e,t){var r,i,c,a=(c=ze(r=n,i=t).getOrThunk(function(){var n=Ln.fromTag(i,he(r).dom);return"thead"===i?Dc(r,"caption,colgroup",n):"colgroup"===i?Dc(r,"caption",n):jt(r,n),n}),Ft(c),c),l=("colgroup"===t?u:o)(e);zt(a,l)},c=function(e,t){0<e.length?i(e,t):ze(n,t).each(Lt)},a=[],l=[],f=[],s=[];return G(e,function(n){switch(n.section){case"thead":a.push(n);break;case"tbody":l.push(n);break;case"tfoot":f.push(n);break;case"colgroup":s.push(n)}}),c(s,"colgroup"),c(a,"thead"),c(l,"tbody"),c(f,"tfoot"),{newRows:t,newCells:r}},Ac=function(n,e){if(0===n.length)return 0;var t=n[0];return Q(n,function(n){return!e(t.element,n.element)}).fold(function(){return n.length},function(n){return n})},Bc=function(n,e,t,r){var o,u=n[e].cells.slice(t),i=Ac(u,r),c=(o=t,$(n,function(n){return yc(n,o)}).slice(e));return{colspan:i,rowspan:Ac(c,r)}},Ec=function(n,e){var t=$(n,function(n){return $(n.cells,R)});return $(n,function(r,o){return{details:nn(r.cells,function(r,u){if(!1!==t[o][u])return[];var i=Bc(n,o,u,e);return function(n,e,r,o){for(var u=n;u<n+r;u++)for(var i=e;i<e+o;i++)t[u][i]=!0}(o,u,i.rowspan,i.colspan),[{element:r.element,rowspan:i.rowspan,colspan:i.colspan,isNew:r.isNew}]}),section:r.section}})},Ic=function(n,e,t){var r,o=[];xt.hasColumns(n)&&(r=$(xt.justColumns(n),function(n){return ie(n.element,t)}),o.push(ce(r,"colgroup")));for(var u=0;u<n.grid.rows;u++){for(var i=[],c=0;c<n.grid.columns;c++){var a=xt.getAt(n,u,c).map(function(n){return ie(n.element,t)}).getOrThunk(function(){return ie(e.gap(),!0)});i.push(a)}var l=ce(i,n.all[u].section);o.push(l)}return o},Pc=function(n,e){return $(n,function(n){var t,r=(t=n.details,on(t,function(n){return be(n.element).map(function(n){var e=be(n).isNone();return ie(n,e)})}).getOrThunk(function(){return ie(e.row(),!0)}));return{element:r.element,cells:n.details,section:n.section,isNew:r.isNew}})},kc=function(n,e){var t=Ec(n,Vn);return Pc(t,e)},Mc=function(n,e){return on(n.all,function(n){return J(n.cells,function(n){return Vn(e,n.element)})})},Nc=function(n,e,t,r,o){return function(u,i,c,a,l){var f=xt.fromTable(i);return e(f,c).map(function(e){var t=Ic(f,a,!1),r=n(t,e,Vn,o(a));return{grid:kc(r.grid,a),cursor:r.cursor}}).fold(function(){return E.none()},function(n){var e=Oc(i,n.grid),o=E.from(l).getOrThunk(function(){return Zi(i)});return t(i,n.grid,o),r(i),li(u,i),E.some({cursor:n.cursor,newRows:e.newRows,newCells:e.newCells})})}},jc=function(n,e){return dt(e.element).bind(function(e){return Mc(n,e)})},_c=function(n,e){var t=$(e.selection,function(e){return dt(e).bind(function(e){return Mc(n,e)})}),r=Tc(t);return 0<r.length?E.some({cells:r,generators:e.generators,clipboard:e.clipboard}):E.none()},Wc=function(n,e){var t=$(e.selection,function(e){return dt(e).bind(function(e){return Mc(n,e)})}),r=Tc(t);return 0<r.length?E.some(r):E.none()},zc=function(n,e,t,r){for(var o=xc(n).rows,u=!0,i=0;i<o.length;i++)for(var c=0;c<Sc(o[0]);c++){var a=t(Cc(o[i],c),e);!0===a&&!1===u?vc(o[i],c,ie(r(),!0)):!0===a&&(u=!1)}return n},Fc=function(n,e,t,r){var o,u,i,c=xc(n).rows;return 0<e&&e<c.length&&(o=c[e-1].cells,i=t,u=Y(o,function(n,e){return V(n,function(n){return i(n.element,e.element)})?n:n.concat([e])},[]),G(u,function(n){for(var o=E.none(),u=e;u<c.length;u++)!function(e){for(var u=0;u<Sc(c[0]);u++)!function(u){var i=c[e].cells[u];t(i.element,n.element)&&(o.isNone()&&(o=E.some(r())),o.each(function(n){vc(c[e],u,ie(n,!0))}))}(u)}(u)})),n},Lc=function(n){return{is:function(e){return n===e},isValue:D,isError:R,getOr:S(n),getOrThunk:S(n),getOrDie:S(n),or:function(){return Lc(n)},
orThunk:function(){return Lc(n)},fold:function(e,t){return t(n)},map:function(e){return Lc(e(n))},mapError:function(){return Lc(n)},each:function(e){e(n)},bind:function(e){return e(n)},exists:function(e){return e(n)},forall:function(e){return e(n)},toOptional:function(){return E.some(n)}}},Hc=function(n){return{is:R,isValue:R,isError:D,getOr:x,getOrThunk:function(n){return n()},getOrDie:function(){return e=String(n),function(){throw new Error(e)}();var e},or:function(n){return n},orThunk:function(n){return n()},fold:function(e){return e(n)},map:function(){return Hc(n)},mapError:function(e){return Hc(e(n))},each:C,bind:function(){return Hc(n)},exists:R,forall:D,toOptional:E.none}},qc={value:Lc,error:Hc,fromOption:function(n,e){return n.fold(function(){return Hc(e)},Lc)}},Vc=function(n,e){return{rowDelta:0,colDelta:Sc(n[0])-Sc(e[0])}},Uc=function(n,e){return{rowDelta:n.length-e.length,colDelta:0}},$c=function(n,e,t){var r="colgroup"===e.section?t.col:t.cell;return $(n,function(){return ie(r(),!0)})},Gc=function(n,e,t){return n.concat(U(e,function(){var e=n[n.length-1];return bc(e,$c(e.cells,e,t))}))},Kc=function(n,e,t){return $(n,function(n){var r=$c(U(e,x),n,t);return bc(n,n.cells.concat(r))})},Xc=function(n,e,t){var r=e.colDelta<0?Kc:x;return(e.rowDelta<0?Gc:x)(r(n,Math.abs(e.colDelta),t),Math.abs(e.rowDelta),t)},Yc=function(e,t,r,o,u){for(var i,c,a,l,f,s=e.row,d=e.column,m=s+r.length,g=d+Sc(r[0]),p=s;p<m;p++)for(var h=d;h<g;h++){a=h,l=void 0,l=n(u,yc((i=t)[c=p],a).element),f=i[c],1<i.length&&1<Sc(f)&&(0<a&&l(Cc(f,a-1))||a<f.cells.length-1&&l(Cc(f,a+1))||0<c&&l(Cc(i[c-1],a))||c<i.length-1&&l(Cc(i[c+1],a)))&&zc(t,Cc(t[p],h),u,o.cell);var v=Cc(r[p-s],h-d),b=o.replace(v);vc(t[p],h,ie(b,!0))}return t},Jc=function(n,e,t,r,o){return function(n,e,t){if(n.row>=e.length||n.column>Sc(e[0]))return qc.error("invalid start address out of table bounds, row: "+n.row+", column: "+n.column);var r=e.slice(n.row),o=r[0].cells.slice(n.column),u=Sc(t[0]),i=t.length;return qc.value({rowDelta:r.length-i,colDelta:o.length-u})}(n,e,t).map(function(u){var i=Xc(e,u,r);return Yc(n,i,t,r,o)})},Qc=function(n,e,t,r,o){var u,i,c,a;u=e,i=n,c=o,a=r.cell,0<i&&i<u[0].cells.length&&G(u,function(n){var e=n.cells[i-1],t=n.cells[i];c(t.element,e.element)&&vc(n,i,ie(a(),!0))});var l=Uc(t,e),f=Xc(t,l,r),s=Uc(e,f),d=Xc(e,s,r);return $(d,function(e,t){var r=e.cells.slice(0,n).concat(f[t].cells).concat(e.cells.slice(n,e.cells.length));return bc(e,r)})},Zc=function(n,e,t,r,o){Fc(e,n,o,r.cell);var u=Vc(t,e),i=Xc(t,u,r),c=Vc(e,i),a=Xc(e,c,r),l=xc(a),f=l.cols,s=l.rows;return f.concat(s.slice(0,n)).concat(i).concat(s.slice(n,s.length))},na=function(n,e,t,r,o){var u=xc(n),i=u.rows,c=u.cols,a=i.slice(0,e),l=i.slice(e),f=wc(i[t],function(n,t){return 0<e&&e<i.length&&r(Cc(i[e-1],t),Cc(i[e],t))?yc(i[e],t):ie(o(n.element,r),!0)});return c.concat(a).concat([f]).concat(l)},ea=function(n,e,t,r,o){return $(n,function(n){var u,i,c,a,l,f,s,d,m,g,p,h,v,b=0<e&&e<Sc(n)&&r(Cc(n,e-1),Cc(n,e)),w=(i=e,c=(u=n).section,a=t,l=r,f=o,"colgroup"!==c&&b?yc(u,i):ie(f(Cc(u,a),l),!0));return d=e,m=w,p=(g=(s=n).cells).slice(0,d),h=g.slice(d),v=p.concat([m]).concat(h),bc(s,v)})},ta=function(n,e,t,r){return $(n,function(n){return wc(n,function(n){return o=n,V(e,function(n){return t(o.element,n.element)})?ie(r(n.element,t),!0):n;var o})})},ra=function(n,e,t,r){return Cc(n[e],t)!==undefined&&0<e&&r(Cc(n[e-1],t),Cc(n[e],t))},oa=function(n,e,t){return 0<e&&t(Cc(n,e-1),Cc(n,e))},ua=function(n,e,t,r){var o=nn(n,function(r,o){return ra(n,o,e,t)||oa(r,e,t)?[]:[yc(r,e)]});return ta(n,o,t,r)},ia=function(n,e,t,r){var o=xc(n).rows,u=o[e],i=nn(u.cells,function(n,r){return ra(o,e,r,t)||oa(u,r,t)?[]:[n]});return ta(n,i,t,r)},ca=Pu(["cell","row","replace","gap","col","colgroup"]),aa=function(n){return{element:n,colspan:rt(n,"colspan",1),rowspan:rt(n,"rowspan",1)}},la=function(n,e){void 0===e&&(e=aa),ca(n);var t=Xi(E.none()),r=function(t){return function(e){switch(ae(e.element)){case"col":return n.col(e);default:return n.cell(e)}}(e(t))},o=function(n){var e=r(n);return t.get().isNone()&&t.set(E.some(e)),u=E.some({item:n,replacement:e}),e},u=E.none();return{getOrInit:function(n,e){return u.fold(function(){return o(n)},function(t){return e(n,t.item)?t.replacement:o(n)})},cursor:t.get}},fa=function(n,e){return function(t){var r=Xi(E.none());ca(t);var o=[],u=function(u){var i={scope:n},c=t.replace(u,e,i);return o.push({item:u,sub:c}),r.get().isNone()&&r.set(E.some(c)),c};return{replaceOrInit:function(n,e){return t=n,r=e,J(o,function(n){return r(n.item,t)}).fold(function(){return u(n)},function(t){return e(n,t.item)?t.sub:u(n)});var t,r},cursor:r.get}}},sa=function(n){ca(n);var e=Xi(E.none());return{combine:function(t){return e.get().isNone()&&e.set(E.some(t)),function(){var e=n.cell({element:t,colspan:1,rowspan:1});return tt(e,"width"),tt(t,"width"),e}},cursor:e.get}},da=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","table","thead","tfoot","tbody","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],ma=r(),ga=function(n){return e=n,t=ma.property().name(e),q(da,t);var e,t},pa=function(n){return e=n,t=ma.property().name(e),q(["ol","ul"],t);var e,t},ha=function(n){return e=n,q(["br","img","hr","input"],ma.property().name(e));var e},va=function(n){var e,t=function(n){return"br"===ae(n)},r=function(n){return Cr(n).bind(function(e){var r=Ce(e).map(function(n){return!!ga(n)||!!ha(n)&&"img"!==ae(n)}).getOr(!1);return be(e).map(function(o){return!0===r||"li"===ae(u=o)||_e(u,pa).isSome()||t(e)||ga(o)&&!Vn(n,o)?[]:[Ln.fromTag("br")];var u})}).getOr([])},o=0===(e=nn(n,function(n){var e=Se(n);return en(e,function(n){return t(n)||me(n)&&0===Vt(n).trim().length})?[]:e.concat(r(n))})).length?[Ln.fromTag("br")]:e;Ft(n[0]),zt(n[0],o)},ba=function(n){0===mt(n).length&&Lt(n)},wa=function(n,e){return{grid:n,cursor:e}},ya=function(n,e,t){var r=xc(n).rows;return Ca(r,e,t).orThunk(function(){return Ca(r,0,0)})},Ca=function(n,e,t){return E.from(n[e]).bind(function(n){return E.from(n.cells[t]).bind(function(n){return E.from(n.element)})})},Sa=function(n,e,t){var r=xc(n).rows;return wa(n,Ca(r,e,t))},xa=function(n){return Y(n,function(n,e){return V(n,function(n){return n.row===e.row})?n:n.concat([e])},[]).sort(function(n,e){return n.row-e.row})},Ta=function(n){return Y(n,function(n,e){return V(n,function(n){return n.column===e.column})?n:n.concat([e])},[]).sort(function(n,e){return n.column-e.column})},Ra=function(n,e,t){var r,o,u=(r=n,o=t.section,vt(r,function(){return o})),i=xt.generate(u);return Ic(i,e,!0)},Da=function(n,e){var t=K(n,e);return 0===t.length?E.some("td"):t.length===n.length?E.some("th"):E.none()},Oa=function(n,e,t){var r=xt.generate(e),o=t.getWidths(r,t);eu(r,o,t)},Aa=Nc(function(n,e,t,r){var o=e[0].row,u=e[0].row,i=xa(e),c=Y(i,function(n){return na(n,u,o,t,r.getOrInit)},n);return Sa(c,u,e[0].column)},Wc,C,C,la),Ba=Nc(function(n,e,t,r){var o=xa(e),u=o[o.length-1].row,i=o[o.length-1].row+o[o.length-1].rowspan,c=Y(o,function(n){return na(n,i,u,t,r.getOrInit)},n);return Sa(c,i,e[0].column)},Wc,C,C,la),Ea=Nc(function(n,e,t,r){var o=Ta(e),u=o[0].column,i=o[0].column,c=Y(o,function(n){return ea(n,i,u,t,r.getOrInit)},n);return Sa(c,e[0].row,i)},Wc,Oa,C,la),Ia=Nc(function(n,e,t,r){var o=e[e.length-1].column,u=e[e.length-1].column+e[e.length-1].colspan,i=Ta(e),c=Y(i,function(n){return ea(n,u,o,t,r.getOrInit)},n);return Sa(c,e[0].row,u)},Wc,Oa,C,la),Pa=Nc(function(n,e){var t,r,o,u,i=Ta(e),c=(t=n,r=i[0].column,o=i[i.length-1].column,u=$(t,function(n){var e=n.cells.slice(0,r).concat(n.cells.slice(o+1));return ce(e,n.section)}),K(u,function(n){return 0<n.cells.length})),a=ya(c,e[0].row,e[0].column);return wa(c,a)},Wc,Oa,ba,la),ka=Nc(function(n,e){var t,r,o,u,i,c=xa(e),a=(t=n,r=c[0].row,o=c[c.length-1].row,i=(u=xc(t)).rows,u.cols.concat(i.slice(0,r)).concat(i.slice(o+1))),l=ya(a,e[0].row,e[0].column);return wa(a,l)},Wc,C,ba,la),Ma=Nc(function(n,e,t,r){var o=ua(n,e.column,t,r.replaceOrInit);return Sa(o,e.row,e.column)},jc,C,C,fa("row","th")),Na=Nc(function(n,e,t,r){var o=ua(n,e.column,t,r.replaceOrInit);return Sa(o,e.row,e.column)},jc,C,C,fa(null,"td")),ja=(Nc(function(n,e,t,r){var o=ia(n,e.row,t,r.replaceOrInit);return Sa(o,e.row,e.column)},jc,C,C,fa("col","th")),Nc(function(n,e,t,r){var o=ia(n,e.row,t,r.replaceOrInit);return Sa(o,e.row,e.column)},jc,C,C,fa(null,"td")),Nc(function(n,e){var t=e.cells;va(t);var r=function(n,e,t){var r=xc(n).rows;if(0===r.length)return n;for(var o=e.startRow;o<=e.finishRow;o++)for(var u=e.startCol;u<=e.finishCol;u++)vc(r[o],u,ie(t(),!1));return n}(n,e.bounds,S(t[0]));return wa(r,E.from(t[0]))},function(n,e){return e.mergable},C,C,sa)),_a=Nc(function(n,e,t,r){var o=X(e,function(n,e){return zc(n,e,t,r.combine(e))},n);return wa(o,E.from(e[0]))},function(n,e){return e.unmergable},Oa,C,sa),Wa=Nc(function(n,e,t){var r,o,u,i=(r=e.clipboard,o=e.generators,u=xt.fromTable(r),Ic(u,o,!0)),c={row:e.row,column:e.column};return Jc(c,n,i,e.generators,t).fold(function(){return wa(n,E.some(e.element))},function(n){var t=ya(n,e.row,e.column);return wa(n,t)})},function(n,e){return dt(e.element).bind(function(t){return Mc(n,t).map(function(n){return un(un({},n),{generators:e.generators,clipboard:e.clipboard})})})},Oa,C,la),za=Nc(function(n,e,t){var r=xc(n).rows,o=e.cells[0].column,u=r[e.cells[0].row],i=Ra(e.clipboard,e.generators,u),c=Qc(o,n,i,e.generators,t),a=ya(c,e.cells[0].row,e.cells[0].column);return wa(c,a)},_c,C,C,la),Fa=Nc(function(n,e,t){var r=xc(n).rows,o=e.cells[e.cells.length-1].column+e.cells[e.cells.length-1].colspan,u=r[e.cells[0].row],i=Ra(e.clipboard,e.generators,u),c=Qc(o,n,i,e.generators,t),a=ya(c,e.cells[0].row,e.cells[0].column);return wa(c,a)},_c,C,C,la),La=Nc(function(n,e,t){var r=xc(n).rows,o=e.cells[0].row,u=r[o],i=Ra(e.clipboard,e.generators,u),c=Zc(o,n,i,e.generators,t),a=ya(c,e.cells[0].row,e.cells[0].column);return wa(c,a)},_c,C,C,la),Ha=Nc(function(n,e,t){var r=xc(n).rows,o=e.cells[e.cells.length-1].row+e.cells[e.cells.length-1].rowspan,u=r[e.cells[0].row],i=Ra(e.clipboard,e.generators,u),c=Zc(o,n,i,e.generators,t),a=ya(c,e.cells[0].row,e.cells[0].column);return wa(c,a)},_c,C,C,la),qa=function(n,e){var t=xt.fromTable(n);return Wc(t,e).bind(function(n){var e=n[n.length-1],r=n[0].column,o=e.column+e.colspan,u=Z($(t.all,function(n){return K(n.cells,function(n){return n.column>=r&&n.column<o})}));return Da(u,function(n){return"th"===ae(n.element)})}).getOr("")},Va=function(n){return zi(n.parentNode)},Ua=function(n,e){var t="thead"===Va(e),r=!V(e.cells,function(n){return"th"!==zi(n)});return t||r?E.some({thead:t,ths:r}):E.none()},$a=function(n,e){return"thead"===(t=Ua(0,e).fold(function(){return Va(e)},function(){return"thead"}))?"header":"tfoot"===t?"footer":"body";var t},Ga=function(n,e,t){var r,o,u=n.getParent(e,"table"),i=e.parentNode,c=zi(i);t!==c&&((r=n.select(t,u)[0])||(r=n.create(t),o=u.firstChild,"thead"===t?rn(Ne(Ln.fromDom(u),"caption,colgroup")).fold(function(){return u.insertBefore(r,o)},function(e){return n.insertAfter(r,e.dom)}):u.appendChild(r)),"tbody"===t&&"thead"===c&&r.firstChild?r.insertBefore(e,r.firstChild):r.appendChild(e),i.hasChildNodes()||n.remove(i))},Ka=function(n,e,t,r){return G(e,function(e){var o=zi(e)!==t?n.rename(e,t):e;n.setAttrib(o,"scope",r)})},Xa=function(n,e,t){var r,o,u,i=n.dom;"header"===t?(o="auto"===(r=Ni(n))?(u=pt(Ln.fromDom(e.cells[0])).map(ht).getOr([]),on(u,function(n){return Ua(0,n.dom)}).map(function(n){return n.thead&&n.ths?"sectionCells":n.thead?"section":"cells"}).getOr("section")):r,Ka(i,e.cells,"section"===o?"td":"th","col"),Ga(i,e,"cells"===o?"tbody":"thead")):(Ka(i,e.cells,"td",null),Ga(i,e,"footer"===t?"tfoot":"tbody"))},Ya=function(n){return function(e){var t,r=ae(e),o="col"===r||"colgroup"===r?pt(t=e).bind(function(n){return ur(n,_r.firstSelectedSelector)}).fold(function(){return t},function(n){return n[0]}):e;return Le(o,n)}},Ja=Ya("th,td"),Qa=Ya("th,td,caption"),Za=function(n,e){return Ja(n).map(function(){return jr(e)}).getOr([])},nl=function(n,e){var t,r,o,u=Ja(n);return r=u.bind(function(n){return pt(n)}).map(ht),o=function(n,t){return K(t,function(t){return V(Nr(t.dom.cells),function(t){return"1"===Ue(t,e)||Vn(t,n)})})},((t=u).isSome()&&r.isSome()?E.some(o(t.getOrDie(),r.getOrDie())):E.none()).getOr([])},el=function(n,e,t){var r=function(n){return"table"===ae(Fi(n))},o=Wi(n),u=function(e,t,r,u){return function(i,c){Ui(i);var a=u(),l=Ln.fromDom(n.getDoc()),f=kr(r,l,o),s=tc(n,i);return t(i)?e(a,i,c,f,s).bind(function(e){return G(e.newRows,function(e){hi(n,e.dom)}),G(e.newCells,function(e){vi(n,e.dom)}),e.cursor.map(function(e){var t=gc(pc,e),r=n.dom.createRng();return r.setStart(t.element.dom,t.offset),r.setEnd(t.element.dom,t.offset),r})}):E.none()}},i=u(ka,function(e){return!1===r(n)||1<Du(e).rows},C,e),c=u(Pa,function(e){return!1===r(n)||1<Du(e).columns},C,e),a=u(Aa,D,C,e),l=u(Ba,D,C,e),f=u(Ea,D,hc,e),s=u(Ia,D,hc,e),d=u(ja,D,C,e),m=u(_a,D,C,e),g=u(za,D,C,e),p=u(Fa,D,C,e),h=u(La,D,C,e),v=u(Ha,D,C,e),b=u(Wa,D,C,e),w=function(n,e){return ee(n,"type").filter(function(n){return q(e,n)})};return{deleteRow:i,deleteColumn:c,insertRowsBefore:a,insertRowsAfter:l,insertColumnsBefore:f,insertColumnsAfter:s,mergeCells:d,unmergeCells:m,pasteColsBefore:g,pasteColsAfter:p,pasteRowsBefore:h,pasteRowsAfter:v,pasteCells:b,setTableCellType:function(n,e){return w(e,["td","th"]).each(function(e){var r=$(Za(Ki(n),t),function(n){return n.dom});Ka(n.dom,r,e,null)})},setTableRowType:function(n,e){return w(e,["header","body","footer"]).each(function(e){$(nl(Ki(n),_r.selected),function(t){return Xa(n,t.dom,e)})})},makeColumnHeader:u(Ma,D,C,e),unmakeColumnHeader:u(Na,D,C,e),getTableRowType:function(n){var e=nl(Ki(n),_r.selected);if(0<e.length){var t=$(e,function(n){return $a(0,n.dom)}),r=q(t,"header"),o=q(t,"footer");if(r||o){var u=q(t,"body");return!r||u||o?r||u||!o?"":"footer":"header"}return"body"}},getTableCellType:function(n){return Da(Za(Ki(n),t),function(n){return"th"===ae(n)}).getOr("")},getTableColType:qa}},tl={styles:{"border-collapse":"collapse",width:"100%"},attributes:{border:"1"},colGroups:!1},rl=function(n,e,t,r){for(var o=Ln.fromTag("tr"),u=0;u<n;u++){var i=r<e||u<t?Ln.fromTag("th"):Ln.fromTag("td");u<t&&qe(i,"scope","row"),r<e&&qe(i,"scope","col"),jt(i,Ln.fromTag("br")),jt(o,i)}return o},ol=function(n){var e=Ln.fromTag("colgroup");return U(n,function(){return jt(e,Ln.fromTag("col"))}),e},ul=function(n,e,t,r){return U(n,function(n){return rl(e,t,r,n)})},il=function(n,e){n.selection.select(e.dom,!0),n.selection.collapse(!0)},cl=function(e,t,r,o,u){var i=Di(e),c={styles:i,attributes:Ri(e),colGroups:e.getParam("table_use_colgroups",!1,"boolean")},a=function(n,e,t,r,o,u){void 0===u&&(u=tl);var i=Ln.fromTag("table"),c="cells"!==o;Qe(i,u.styles),Ve(i,u.attributes),u.colGroups&&jt(i,ol(e));var a,l,f=Math.min(n,t);c&&0<t&&(a=Ln.fromTag("thead"),jt(i,a),l=ul(t,e,"sectionCells"===o?f:0,r),zt(a,l));var s=Ln.fromTag("tbody");jt(i,s);var d=ul(c?n-f:n,e,c?0:t,r);return zt(s,d),i}(r,t,u,o,Ni(e),c);qe(a,"data-mce-id","__mce");var l,f,s,d=(l=a,f=Ln.fromTag("div"),s=Ln.fromDom(l.dom.cloneNode(!0)),jt(f,s),f.dom.innerHTML);return e.insertContent(d),Fe(Fi(e),'table[data-mce-id="__mce"]').map(function(t){var r,o,u;return ki(e)?ic(e,t):Mi(e)?cc(t):(Pi(e)||(r=i.width,k(r)&&-1!==r.indexOf("%")))&&uc(e,t),Ui(t),Ge(t,"data-mce-id"),o=e,G(je(t,"tr"),function(n){hi(o,n.dom),G(je(n,"th,td"),function(n){vi(o,n.dom)})}),u=e,Fe(t,"td,th").each(n(il,u)),t.dom}).getOr(null)},al=function(n,e,t,r,o){void 0===r&&(r={});var u=function(n){return z(n)&&0<n};if(u(e)&&u(t)){var i=r.headerRows||0,c=r.headerColumns||0;return cl(n,t,e,c,i)}return console.error(o),null},ll=function(n){return function(){return n().fold(function(){return[]},function(n){return $(n,function(n){return n.dom})})}},fl=function(n){return function(e){var t=0<e.length?E.some(Nr(e)):E.none();n(t)}},sl=function(n,e,t,r){return{insertTable:function(e,t,r){return void 0===r&&(r={}),al(n,t,e,r,"Invalid values for insertTable - rows and columns values are required to insert a table.")},setClipboardRows:fl(e.setRows),getClipboardRows:ll(e.getRows),setClipboardCols:fl(e.setColumns),getClipboardCols:ll(e.getColumns),resizeHandler:t,selectionTargets:r}},dl=function(n,e,t){var r=rt(n,e,1);1===t||r<=1?Ge(n,e):qe(n,e,Math.min(t,r))},ml=function(n,t){var r=xt.fromTable(n);return Wc(r,t).map(function(n){var t,o,u=n[n.length-1],i=n[0].column,c=u.column+u.colspan;return e(function(n,e,t){if(xt.hasColumns(n)){var r=K(xt.justColumns(n),function(n){return n.column>=e&&n.column<t}),o=$(r,function(n){var r=Rr(n.element);return dl(r,"span",t-e),r}),u=Ln.fromTag("colgroup");return zt(u,o),[u]}return[]}(r,i,c),(t=i,o=c,$(r.all,function(n){var e=K(n.cells,function(n){return n.column>=t&&n.column<o}),r=$(e,function(n){var e=Rr(n.element);return dl(e,"colspan",o-t),e}),u=Ln.fromTag("tr");return zt(u,r),u})))})},gl=function(n,e,t){var r=xt.fromTable(n);return Wc(r,e).map(function(n){var e=Ic(r,t,!1),o=xc(e).rows.slice(n[0].row,n[n.length-1].row+n[n.length-1].rowspan),u=kc(o,t);return $(u,function(n){var e=Tr(n.element);return G(n.cells,function(n){var t=Rr(n.element);Rc(t,"colspan",n.colspan,1),Rc(t,"rowspan",n.rowspan,1),jt(e,t)}),e})})},pl=tinymce.util.Tools.resolve("tinymce.util.Tools"),hl=function(n,e,t){return function(e,r){for(var o=0;o<r.length;o++){var u=n.getStyle(r[o],t);if(void 0===e&&(e=u),e!==u)return""}return e}(void 0,n.select("td,th",e))},vl=function(n,e,t){t&&n.formatter.apply("align"+t,{},e)},bl=function(n,e){pl.each("left center right".split(" "),function(t){n.formatter.remove("align"+t,{},e)})},wl=function(n){return te(e=n,t="menu")&&e[t]!==undefined&&null!==e[t];var e,t},yl=function(n,e){return(e||[]).concat($(n,function(n){var e=n.text||n.title;return wl(n)?{text:e,items:yl(n.menu)}:{text:e,value:n.value}}))},Cl=function(n){return function(e){return vn(e,"rgb")?n.toHex(e):e}},Sl=function(n,e){var t=Ln.fromDom(e);return{borderwidth:et(t,"border-width").getOr(""),borderstyle:et(t,"border-style").getOr(""),bordercolor:et(t,"border-color").map(Cl(n)).getOr(""),backgroundcolor:et(t,"background-color").map(Cl(n)).getOr("")}},xl=function(n){var e=n[0],t=n.slice(1);return G(t,function(n){G(Kn(e),function(t){Yn(n,function(n,r){var o=e[t];""!==o&&t===r&&o!==n&&(e[t]="")})})}),e},Tl=function(n){var e=[{name:"borderstyle",type:"listbox",label:"Border style",items:[{text:"Select...",value:""},{text:"Solid",value:"solid"},{text:"Dotted",value:"dotted"},{text:"Dashed",value:"dashed"},{text:"Double",value:"double"},{text:"Groove",value:"groove"},{text:"Ridge",value:"ridge"},{text:"Inset",value:"inset"},{text:"Outset",value:"outset"},{text:"None",value:"none"},{text:"Hidden",value:"hidden"}]},{name:"bordercolor",type:"colorinput",label:"Border color"},{name:"backgroundcolor",type:"colorinput",label:"Background color"}];return{title:"Advanced",name:"advanced",items:"cell"===n?[{name:"borderwidth",type:"input",label:"Border width"}].concat(e):e}},Rl=function(n,e,t,r){return J(n,function(n){return t.formatter.matchNode(r,e+n)}).getOr("")},Dl=n(Rl,["left","center","right"],"align"),Ol=n(Rl,["top","middle","bottom"],"valign"),Al=function(n,e){var t,r,o,u,i=Di(n),c=Ri(n),a=e?(t=n.dom,{borderstyle:ee(i,"border-style").getOr(""),bordercolor:Cl(t)(ee(i,"border-color").getOr("")),backgroundcolor:Cl(t)(ee(i,"background-color").getOr(""))}):{};return un(un(un(un(un(un({},{height:"",width:"100%",cellspacing:"",cellpadding:"",caption:!1,"class":"",align:"",border:""}),i),c),a),(u=i["border-width"],Ii(n)&&u?{border:u}:ee(c,"border").fold(function(){return{}},function(n){return{border:n}}))),(r=ee(i,"border-spacing").or(ee(c,"cellspacing")).fold(function(){return{}},function(n){return{cellspacing:n}}),o=ee(i,"border-padding").or(ee(c,"cellpadding")).fold(function(){return{}},function(n){return{cellpadding:n}}),un(un({},r),o)))},Bl=[{name:"width",type:"input",label:"Width"},{name:"height",type:"input",label:"Height"},{name:"celltype",type:"listbox",label:"Cell type",items:[{text:"Cell",value:"td"},{text:"Header cell",value:"th"}]},{name:"scope",type:"listbox",label:"Scope",items:[{text:"None",value:""},{text:"Row",value:"row"},{text:"Column",value:"col"},{text:"Row group",value:"rowgroup"},{text:"Column group",value:"colgroup"}]},{name:"halign",type:"listbox",label:"H Align",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{name:"valign",type:"listbox",label:"V Align",items:[{text:"None",value:""},{text:"Top",value:"top"},{text:"Middle",value:"middle"},{text:"Bottom",value:"bottom"}]}],El=function(n){return Bl.concat((0<(e=yl(n.getParam("table_cell_class_list",[],"array"))).length?E.some({name:"class",type:"listbox",label:"Class",items:e}):E.none()).toArray());var e},Il=function(n){return function(e,t){var r=e.dom;return{setAttrib:function(e,o){n&&!o||r.setAttrib(t,e,o)},setStyle:function(e,o){n&&!o||r.setStyle(t,e,o)},setFormat:function(r,o){n&&!o||(""===o?e.formatter.remove(r,{value:null},t,!0):e.formatter.apply(r,{value:o},t))}}}},Pl={normal:Il(!1),ifTruthy:Il(!0)},kl=function(n){return pt(n[0]).map(function(e){var t=xt.fromTable(e),r=xt.justCells(t),o=K(r,function(e){return V(n,function(n){return Vn(e.element,n)})});return $(o,function(n){return{element:n.element.dom,column:xt.getColumnAt(t,n.column).map(function(n){return n.element.dom})}})})},Ml=function(n,e,t){var r=n.dom,o=1===e.length;1<=e.length&&kl(e).each(function(e){return G(e,function(e){var u,i,c,a,l,f,s,d,m,g,p=e.element,h=t.celltype&&zi(p)!==t.celltype?r.rename(p,t.celltype):p,v=o?Pl.normal(n,h):Pl.ifTruthy(n,h);i=e.column.map(function(e){return o?Pl.normal(n,e):Pl.ifTruthy(n,e)}).getOr(v),c=t,(u=v).setAttrib("scope",c.scope),u.setAttrib("class",c["class"]),u.setStyle("height",Vi(c.height)),i.setStyle("width",Vi(c.width)),Ai(n)&&(l=t,(a=v).setFormat("tablecellbackgroundcolor",l.backgroundcolor),a.setFormat("tablecellbordercolor",l.bordercolor),a.setFormat("tablecellborderstyle",l.borderstyle),a.setFormat("tablecellborderwidth",Vi(l.borderwidth))),o&&(bl(n,h),f=n,s=h,pl.each("top middle bottom".split(" "),function(n){f.formatter.remove("valign"+n,{},s)})),t.halign&&vl(n,h,t.halign),t.valign&&(d=n,m=h,(g=t.valign)&&d.formatter.apply("valign"+g,{},m))})})},Nl=function(n,e,t){var r=t.getData();t.close(),n.undoManager.transact(function(){Ml(n,e,r),n.focus()})},jl=function(n,e){var t=kl(e).map(function(e){return $(e,function(e){return t=n,r=e.element,o=Ai(n),u=e.column,i=t.dom,c=u.getOr(r),un({width:(a=function(n,e){return i.getStyle(n,e)||i.getAttrib(n,e)})(c,"width"),height:a(r,"height"),scope:i.getAttrib(r,"scope"),celltype:zi(r),"class":i.getAttrib(r,"class",""),halign:Dl(t,r),valign:Ol(t,r)},o?Sl(i,r):{});var t,r,o,u,i,c,a})});return xl(t.getOrDie())},_l=function(e,t){var r,o,u,i=Za(Ki(e),t);0!==i.length&&(r=jl(e,i),o={type:"tabpanel",tabs:[{title:"General",name:"general",items:El(e)},Tl("cell")]},u={type:"panel",items:[{type:"grid",columns:2,items:El(e)}]},e.windowManager.open({title:"Cell Properties",size:"normal",body:Ai(e)?o:u,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:r,onSubmit:n(Nl,e,i)}))},Wl=[{type:"listbox",name:"type",label:"Row type",items:[{text:"Header",value:"header"},{text:"Body",value:"body"},{text:"Footer",value:"footer"}]},{type:"listbox",name:"align",label:"Alignment",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"Height",name:"height",type:"input"}],zl=function(n){return Wl.concat((0<(e=yl(n.getParam("table_row_class_list",[],"array"))).length?E.some({name:"class",type:"listbox",label:"Class",items:e}):E.none()).toArray());var e},Fl=function(n,e,t,r){var o=1===e.length;G(e,function(e){r.type!==zi(e.parentNode)&&Xa(n,e,r.type);var u,i,c,a,l=o?Pl.normal(n,e):Pl.ifTruthy(n,e);i=r,(u=l).setAttrib("scope",i.scope),u.setAttrib("class",i["class"]),u.setStyle("height",Vi(i.height)),Bi(n)&&(a=r,(c=l).setStyle("background-color",a.backgroundcolor),c.setStyle("border-color",a.bordercolor),c.setStyle("border-style",a.borderstyle)),r.align!==t.align&&(bl(n,e),vl(n,e,r.align))})},Ll=function(n,e,t,r){var o=r.getData();r.close(),n.undoManager.transact(function(){Fl(n,e,t,o),n.focus()})},Hl=function(e){var t,r,o,u,i=nl(Ki(e),_r.selected);0!==i.length&&(t=$(i,function(n){return t=e,r=n.dom,o=Bi(e),u=t.dom,un({height:u.getStyle(r,"height")||u.getAttrib(r,"height"),scope:u.getAttrib(r,"scope"),"class":u.getAttrib(r,"class",""),type:$a(0,r),align:Dl(t,r)},o?Sl(u,r):{});var t,r,o,u}),r=xl(t),o={type:"tabpanel",tabs:[{title:"General",name:"general",items:zl(e)},Tl("row")]},u={type:"panel",items:[{type:"grid",columns:2,items:zl(e)}]},e.windowManager.open({title:"Row Properties",size:"normal",body:Bi(e)?o:u,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:r,onSubmit:n(Ll,e,$(i,function(n){return n.dom}),r)}))},ql=tinymce.util.Tools.resolve("tinymce.Env"),Vl=function(n,e,t,r){if("TD"===e.tagName||"TH"===e.tagName)k(t)?n.setStyle(e,t,r):n.setStyle(e,t);else if(e.children)for(var o=0;o<e.children.length;o++)Vl(n,e.children[o],t,r)},Ul=function(n,e,t){var r,o=n.dom,u=t.getData();t.close(),""===u["class"]&&delete u["class"],n.undoManager.transact(function(){var t,i;e||(t=parseInt(u.cols,10)||1,i=parseInt(u.rows,10)||1,e=cl(n,t,i,0,0)),function(n,e,t){var r,o=n.dom,u={},i={};if(u["class"]=t["class"],i.height=Vi(t.height),o.getAttrib(e,"width")&&!Ii(n)?u.width=(r=t.width)?r.replace(/px$/,""):"":i.width=Vi(t.width),Ii(n)?(i["border-width"]=Vi(t.border),i["border-spacing"]=Vi(t.cellspacing)):(u.border=t.border,u.cellpadding=t.cellpadding,u.cellspacing=t.cellspacing),Ii(n)&&e.children)for(var c=0;c<e.children.length;c++)Vl(o,e.children[c],{"border-width":Vi(t.border),padding:Vi(t.cellpadding)}),Ei(n)&&Vl(o,e.children[c],{"border-color":t.bordercolor});Ei(n)&&(i["background-color"]=t.backgroundcolor,i["border-color"]=t.bordercolor,i["border-style"]=t.borderstyle),u.style=o.serializeStyle(un(un({},Di(n)),i)),o.setAttribs(e,un(un({},Ri(n)),u))}(n,e,u),(r=o.select("caption",e)[0])&&!u.caption&&o.remove(r),!r&&u.caption&&((r=o.create("caption")).innerHTML=ql.ie?"\xa0":'<br data-mce-bogus="1"/>',e.insertBefore(r,e.firstChild)),""===u.align?bl(n,e):vl(n,e,u.align),n.focus(),n.addVisual()})},$l=function(e,t){var r,o,u,i,c,a,l,f,s=e.dom,d=Al(e,Ei(e));!1===t?(r=s.getParent(e.selection.getStart(),"table"))?(u=r,i=Ei(o=e),f=o.dom,d=un({width:f.getStyle(u,"width")||f.getAttrib(u,"width"),height:f.getStyle(u,"height")||f.getAttrib(u,"height"),cellspacing:f.getStyle(u,"border-spacing")||f.getAttrib(u,"cellspacing"),cellpadding:f.getAttrib(u,"cellpadding")||hl(o.dom,u,"padding"),border:(c=f,a=u,l=et(Ln.fromDom(a),"border-width"),Ii(o)&&l.isSome()?l.getOr(""):c.getAttrib(a,"border")||hl(o.dom,a,"border-width")||hl(o.dom,a,"border")),caption:!!f.select("caption",u)[0],"class":f.getAttrib(u,"class",""),align:Dl(o,u)},i?Sl(f,u):{})):Ei(e)&&(d.borderstyle="",d.bordercolor="",d.backgroundcolor=""):(d.cols="1",d.rows="1",Ei(e)&&(d.borderstyle="",d.bordercolor="",d.backgroundcolor=""));var m=yl(e.getParam("table_class_list",[],"array"));0<m.length&&d["class"]&&(d["class"]=d["class"].replace(/\s*mce\-item\-table\s*/g,""));var g,p,h,v,b={type:"grid",columns:2,items:(g=m,p=t?[{type:"input",name:"cols",label:"Cols",inputMode:"numeric"},{type:"input",name:"rows",label:"Rows",inputMode:"numeric"}]:[],h=e.getParam("table_appearance_options",!0,"boolean")?[{type:"input",name:"cellspacing",label:"Cell spacing",inputMode:"numeric"},{type:"input",name:"cellpadding",label:"Cell padding",inputMode:"numeric"},{type:"input",name:"border",label:"Border width"},{type:"label",label:"Caption",items:[{type:"checkbox",name:"caption",label:"Show caption"}]}]:[],v=0<g.length?[{type:"listbox",name:"class",label:"Class",items:g}]:[],p.concat([{type:"input",name:"width",label:"Width"},{type:"input",name:"height",label:"Height"}]).concat(h).concat([{type:"listbox",name:"align",label:"Alignment",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]}]).concat(v))},w=Ei(e)?{type:"tabpanel",tabs:[{title:"General",name:"general",items:[b]},Tl("table")]}:{type:"panel",items:[b]};e.windowManager.open({title:"Table Properties",size:"normal",body:w,onSubmit:n(Ul,e,r),buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:d})},Gl=function(n){return Qa(Ki(n))},Kl=function(n){return Ja(Ki(n))},Xl=function(e,t,r,o,u){var i=qi(e),c=function(n){return pt(n,i)},a=function(n){return Kl(e).each(function(t){c(t).each(function(u){var i=zr(o,u,t);n(u,i).each(function(n){e.selection.setRng(n),e.focus(),r.clear(u),Ui(u)})})})},l=function(){return Kl(e).map(function(n){return c(n).bind(function(t){var r=zr(o,t,n),u=kr(C,Ln.fromDom(e.getDoc()),E.none());return gl(t,r,u)})})},f=function(){return Kl(e).map(function(n){return c(n).bind(function(e){var t=zr(o,e,n);return ml(e,t)})})},s=function(n,t){return t().each(function(t){var u=$(t,Rr);Kl(e).each(function(t){return c(t).each(function(t){var i,c,a=Mr(Ln.fromDom(e.getDoc())),l=(i=u,c=a,{selection:jr(o),clipboard:i,generators:c});n(t,l).each(function(n){e.selection.setRng(n),e.focus(),r.clear(t)})})})})};Yn({mceTableSplitCells:function(){return a(t.unmergeCells)},mceTableMergeCells:function(){return a(t.mergeCells)},mceTableInsertRowBefore:function(){return a(t.insertRowsBefore)},mceTableInsertRowAfter:function(){return a(t.insertRowsAfter)},mceTableInsertColBefore:function(){return a(t.insertColumnsBefore)},mceTableInsertColAfter:function(){return a(t.insertColumnsAfter)},mceTableDeleteCol:function(){return a(t.deleteColumn)},mceTableDeleteRow:function(){return a(t.deleteRow)},mceTableCutCol:function(){return f().each(function(n){u.setColumns(n),a(t.deleteColumn)})},mceTableCutRow:function(){return l().each(function(n){u.setRows(n),a(t.deleteRow)})},mceTableCopyCol:function(){return f().each(function(n){return u.setColumns(n)})},mceTableCopyRow:function(){return l().each(function(n){return u.setRows(n)})},mceTablePasteColBefore:function(){return s(t.pasteColsBefore,u.getColumns)},mceTablePasteColAfter:function(){return s(t.pasteColsAfter,u.getColumns)},mceTablePasteRowBefore:function(){return s(t.pasteRowsBefore,u.getRows)},mceTablePasteRowAfter:function(){return s(t.pasteRowsAfter,u.getRows)},mceTableDelete:function(){return Gl(e).each(function(n){pt(n,i).filter(T(i)).each(function(n){var t,r=Ln.fromText("");Mt(n,r),Lt(n),e.dom.isEmpty(e.getBody())?(e.setContent(""),e.selection.setCursorLocation()):((t=e.dom.createRng()).setStart(r.dom,0),t.setEnd(r.dom,0),e.selection.setRng(t),e.nodeChanged())})})},mceTableSizingMode:function(n,t){return r=t,Gl(e).each(function(n){Mi(e)||ki(e)||Pi(e)||pt(n,i).each(function(n){"relative"!==r||Su(n)?"fixed"!==r||xu(n)?"responsive"!==r||Tu(n)||cc(n):ic(e,n):uc(e,n),Ui(n)})});var r}},function(n,t){return e.addCommand(t,n)}),Yn({mceTableCellType:function(n,r){return t.setTableCellType(e,r)},mceTableRowType:function(n,r){return t.setTableRowType(e,r)}},function(n,t){return e.addCommand(t,n)}),e.addCommand("mceTableColType",function(n,e){return ee(e,"type").each(function(n){return a("th"===n?t.makeColumnHeader:t.unmakeColumnHeader)})}),Yn({mceTableProps:n($l,e,!1),mceTableRowProps:n(Hl,e),mceTableCellProps:n(_l,e,o)},function(n,t){return e.addCommand(t,function(){return n()})}),e.addCommand("mceInsertTable",function(n,t){M(t)&&0<Kn(t).length?al(e,t.rows,t.columns,t.options,"Invalid values for mceInsertTable - rows and columns values are required to insert a table."):$l(e,!0)}),e.addCommand("mceTableApplyCellStyle",function(n,t){var r;!M(t)||0!==(r=Za(Ki(e),o)).length&&Yn(t,function(n,t){var o="tablecell"+t.toLowerCase().replace("-","");e.formatter.has(o)&&k(n)&&G(r,function(t){Pl.normal(e,t.dom).setFormat(o,n)})})})},Yl=function(n,e,t){var r=qi(n);Yn({mceTableRowType:function(){return e.getTableRowType(n)},mceTableCellType:function(){return e.getTableCellType(n)},mceTableColType:function(){return Ja(Ki(n)).bind(function(n){return pt(n,r).map(function(r){var o=zr(t,r,n);return e.getTableColType(r,o)})}).getOr("")}},function(e,t){return n.addQueryValueHandler(t,e)})},Jl=function(){var n=Xi(E.none()),e=Xi(E.none()),t=function(n){n.set(E.none())};return{getRows:n.get,setRows:function(r){n.set(r),t(e)},clearRows:function(){return t(n)},getColumns:e.get,setColumns:function(r){e.set(r),t(n)},clearColumns:function(){return t(e)}}},Ql={tablecellbackgroundcolor:{selector:"td,th",styles:{backgroundColor:"%value"},remove_similar:!0},tablecellbordercolor:{selector:"td,th",styles:{borderColor:"%value"},remove_similar:!0},
tablecellborderstyle:{selector:"td,th",styles:{borderStyle:"%value"},remove_similar:!0},tablecellborderwidth:{selector:"td,th",styles:{borderWidth:"%value"},remove_similar:!0}},Zl=function(n){n.formatter.register(Ql)},nf=cr([{none:["current"]},{first:["current"]},{middle:["current","target"]},{last:["current"]}]),ef=un(un({},nf),{none:function(n){return void 0===n&&(n=undefined),nf.none(n)}}),tf=function(n,e){return pt(n,e).bind(function(e){var t=mt(e);return Q(t,function(e){return Vn(n,e)}).map(function(n){return{index:n,all:t}})})},rf=function(n,e,t,r){return{start:n,soffset:e,finish:t,foffset:r}},of=cr([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),uf={before:of.before,on:of.on,after:of.after,cata:function(n,e,t,r){return n.fold(e,t,r)},getStart:function(n){return n.fold(x,x,x)}},cf=cr([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),af={domRange:cf.domRange,relative:cf.relative,exact:cf.exact,exactFromRange:function(n){return cf.exact(n.start,n.soffset,n.finish,n.foffset)},getWin:function(n){var e;return e=n.match({domRange:function(n){return Ln.fromDom(n.startContainer)},relative:function(n){return uf.getStart(n)},exact:function(n){return n}}),Ln.fromDom(ve(e).dom.defaultView)},range:rf},lf=function(n,e){return n.selectNodeContents(e.dom)},ff=function(n,e,t){var r,o,u=n.document.createRange();return r=u,e.fold(function(n){r.setStartBefore(n.dom)},function(n,e){r.setStart(n.dom,e)},function(n){r.setStartAfter(n.dom)}),o=u,t.fold(function(n){o.setEndBefore(n.dom)},function(n,e){o.setEnd(n.dom,e)},function(n){o.setEndAfter(n.dom)}),u},sf=function(n,e,t,r,o){var u=n.document.createRange();return u.setStart(e.dom,t),u.setEnd(r.dom,o),u},df=function(n){return{left:n.left,top:n.top,right:n.right,bottom:n.bottom,width:n.width,height:n.height}},mf=cr([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),gf=function(n,e,t){return e(Ln.fromDom(t.startContainer),t.startOffset,Ln.fromDom(t.endContainer),t.endOffset)},pf=function(n,e){var t,r,o,u=(t=n,e.match({domRange:function(n){return{ltr:S(n),rtl:E.none}},relative:function(n,e){return{ltr:cn(function(){return ff(t,n,e)}),rtl:cn(function(){return E.some(ff(t,e,n))})}},exact:function(n,e,r,o){return{ltr:cn(function(){return sf(t,n,e,r,o)}),rtl:cn(function(){return E.some(sf(t,r,o,n,e))})}}}));return(o=(r=u).ltr()).collapsed?r.rtl().filter(function(n){return!1===n.collapsed}).map(function(n){return mf.rtl(Ln.fromDom(n.endContainer),n.endOffset,Ln.fromDom(n.startContainer),n.startOffset)}).getOrThunk(function(){return gf(0,mf.ltr,o)}):gf(0,mf.ltr,o)},hf=function(n,e){return pf(n,e).match({ltr:function(e,t,r,o){var u=n.document.createRange();return u.setStart(e.dom,t),u.setEnd(r.dom,o),u},rtl:function(e,t,r,o){var u=n.document.createRange();return u.setStart(r.dom,o),u.setEnd(e.dom,t),u}})},vf=(mf.ltr,mf.rtl,function(n,e,t){return e>=n.left&&e<=n.right&&t>=n.top&&t<=n.bottom}),bf=function(n,e,t,r,o){var u=function(t){var r=n.dom.createRange();return r.setStart(e.dom,t),r.collapse(!0),r},i=Vt(e).length,c=function(n,e,t,r,o){if(0===o)return 0;if(e===r)return o-1;for(var u=r,i=1;i<o;i++){var c=n(i),a=Math.abs(e-c.left);if(t<=c.bottom){if(t<c.top||u<a)return i-1;u=a}}return 0}(function(n){return u(n).getBoundingClientRect()},t,r,o.right,i);return u(c)},wf=function(n,e,t,r){return me(e)?function(n,e,t,r){var o=n.dom.createRange();o.selectNode(e.dom);var u=o.getClientRects();return on(u,function(n){return vf(n,t,r)?E.some(n):E.none()}).map(function(o){return bf(n,e,t,r,o)})}(n,e,t,r):(u=e,i=t,c=r,a=(o=n).dom.createRange(),l=Se(u),on(l,function(n){return a.selectNode(n.dom),vf(a.getBoundingClientRect(),i,c)?wf(o,n,i,c):E.none()}));var o,u,i,c,a,l},yf=function(n,e){return e-n.left<n.right-e},Cf=function(n,e,t){var r=n.dom.createRange();return r.selectNode(e.dom),r.collapse(t),r},Sf=function(n,e,t){var r=n.dom.createRange();r.selectNode(e.dom);var o=r.getBoundingClientRect(),u=yf(o,t);return(!0===u?yr:Cr)(e).map(function(e){return Cf(n,e,u)})},xf=function(n,e,t){var r=e.dom.getBoundingClientRect(),o=yf(r,t);return E.some(Cf(n,e,o))},Tf=function(n,e,t,r){var o=n.dom.createRange();o.selectNode(e.dom);var u=o.getBoundingClientRect();return function(n,e,t,r){var o=n.dom.createRange();o.selectNode(e.dom);var u=o.getBoundingClientRect(),i=Math.max(u.left,Math.min(u.right,t)),c=Math.max(u.top,Math.min(u.bottom,r));return wf(n,e,i,c)}(n,e,Math.max(u.left,Math.min(u.right,t)),Math.max(u.top,Math.min(u.bottom,r)))},Rf=document.caretPositionFromPoint?function(n,e,t){return E.from(n.dom.caretPositionFromPoint(e,t)).bind(function(e){if(null===e.offsetNode)return E.none();var t=n.dom.createRange();return t.setStart(e.offsetNode,e.offset),t.collapse(),E.some(t)})}:document.caretRangeFromPoint?function(n,e,t){return E.from(n.dom.caretRangeFromPoint(e,t))}:function(n,e,t){return Ln.fromPoint(n,e,t).bind(function(r){var o=function(){return t=n,u=e,(0===Se(o=r).length?xf:Sf)(t,o,u);var t,o,u};return 0===Se(r).length?o():Tf(n,r,e,t).orThunk(o)})},Df=function(n,e){var t=ae(n);return"input"===t?uf.after(n):q(["br","img"],t)?0===e?uf.before(n):uf.after(n):uf.on(n,e)},Of=function(n,e){var t=n.fold(uf.before,Df,uf.after),r=e.fold(uf.before,Df,uf.after);return af.relative(t,r)},Af=function(n,e,t,r){var o=Df(n,e),u=Df(t,r);return af.relative(o,u)},Bf=function(n,e,t,r){var o,u,i,c,a,l=(u=e,i=t,c=r,(a=he(o=n).dom.createRange()).setStart(o.dom,u),a.setEnd(i.dom,c),a),f=Vn(n,t)&&e===r;return l.collapsed&&!f},Ef=function(n){return E.from(n.getSelection())},If=function(n,e){Ef(n).each(function(n){n.removeAllRanges(),n.addRange(e)})},Pf=function(n,e,t,r,o){var u=sf(n,e,t,r,o);If(n,u)},kf=function(n,e){return pf(n,e).match({ltr:function(e,t,r,o){Pf(n,e,t,r,o)},rtl:function(e,t,r,o){Ef(n).each(function(u){if(u.setBaseAndExtent)u.setBaseAndExtent(e.dom,t,r.dom,o);else if(u.extend)try{c=e,a=t,l=r,f=o,(i=u).collapse(c.dom,a),i.extend(l.dom,f)}catch(A){Pf(n,r,o,e,t)}else Pf(n,r,o,e,t);var i,c,a,l,f})}})},Mf=function(n,e,t,r,o){var u=Af(e,t,r,o);kf(n,u)},Nf=function(n,e,t){var r=Of(e,t);kf(n,r)},jf=function(n){var e=af.getWin(n).dom,t=function(n,t,r,o){return sf(e,n,t,r,o)},r=n.match({domRange:function(n){var e=Ln.fromDom(n.startContainer),t=Ln.fromDom(n.endContainer);return Af(e,n.startOffset,t,n.endOffset)},relative:Of,exact:Af});return pf(e,r).match({ltr:t,rtl:t})},_f=function(n){if(0<n.rangeCount){var e=n.getRangeAt(0),t=n.getRangeAt(n.rangeCount-1);return E.some(rf(Ln.fromDom(e.startContainer),e.startOffset,Ln.fromDom(t.endContainer),t.endOffset))}return E.none()},Wf=function(n){if(null===n.anchorNode||null===n.focusNode)return _f(n);var e=Ln.fromDom(n.anchorNode),t=Ln.fromDom(n.focusNode);return Bf(e,n.anchorOffset,t,n.focusOffset)?E.some(rf(e,n.anchorOffset,t,n.focusOffset)):_f(n)},zf=function(n,e){var t,r,o=(t=e,r=n.document.createRange(),lf(r,t),r);If(n,o)},Ff=function(n){return Ef(n).filter(function(n){return 0<n.rangeCount}).bind(Wf).map(function(n){return af.exact(n.start,n.soffset,n.finish,n.foffset)})},Lf=function(n,e){var t,r,o;return 0<(o=0<(r=(t=hf(n,e)).getClientRects()).length?r[0]:t.getBoundingClientRect()).width||0<o.height?E.some(o).map(df):E.none()},Hf=function(n,e,t){return r=n,o=e,u=t,i=Ln.fromDom(r.document),Rf(i,o,u).map(function(n){return rf(Ln.fromDom(n.startContainer),n.startOffset,Ln.fromDom(n.endContainer),n.endOffset)});var r,o,u,i},qf=tinymce.util.Tools.resolve("tinymce.util.VK"),Vf=function(n,e,t,r){return Gf(n,e,tf(o=t,u).fold(function(){return ef.none(o)},function(n){return n.index+1<n.all.length?ef.middle(o,n.all[n.index+1]):ef.last(o)}),r);var o,u},Uf=function(n,e,t,r){return Gf(n,e,tf(o=t,u).fold(function(){return ef.none()},function(n){return 0<=n.index-1?ef.middle(o,n.all[n.index-1]):ef.first(o)}),r);var o,u},$f=function(n,e){var t=af.exact(e,0,e,0);return jf(t)},Gf=function(n,e,t,r){return t.fold(E.none,E.none,function(n,e){return yr(e).map(function(n){return $f(0,n)})},function(t){return pt(t,e).bind(function(e){var o,u=Wr(t);return n.undoManager.transact(function(){r.insertRowsAfter(e,u)}),o=je(e,"tr"),rn(o).bind(function(n){return Fe(n,"td,th").map(function(n){return $f(0,n)})})})})},Kf=["table","li","dl"],Xf=function(n,e,t){var r,o,u,i;n.keyCode===qf.TAB&&(r=Fi(e),o=function(n){var e=ae(n);return Vn(n,r)||q(Kf,e)},(u=e.selection.getRng()).collapsed&&(i=Ln.fromDom(u.startContainer),dt(i,o).each(function(r){n.preventDefault(),(n.shiftKey?Uf:Vf)(e,o,r,t).each(function(n){e.selection.setRng(n)})})))},Yf=function(n,e){return{selection:n,kill:e}},Jf=function(n,e,t,r){return{start:uf.on(n,e),finish:uf.on(t,r)}},Qf=function(n,e){var t=hf(n,e);return rf(Ln.fromDom(t.startContainer),t.startOffset,Ln.fromDom(t.endContainer),t.endOffset)},Zf=Jf,ns=function(n,e,t,r,o){return Vn(t,r)?E.none():er(t,r,e).bind(function(e){var r=e.boxes.getOr([]);return 0<r.length?(o(n,r,e.start,e.finish),E.some(Yf(E.some(Zf(t,0,t,vr(t))),!0))):E.none()})},es=function(n,e){return{item:n,mode:e}},ts=function(n,e,t,r){return void 0===r&&(r=rs),n.property().parent(e).map(function(n){return es(n,r)})},rs=function(n,e,t,r){return void 0===r&&(r=os),t.sibling(n,e).map(function(n){return es(n,r)})},os=function(n,e,t,r){void 0===r&&(r=os);var o=n.property().children(e);return t.first(o).map(function(n){return es(n,r)})},us=[{current:ts,next:rs,fallback:E.none()},{current:rs,next:os,fallback:E.some(ts)},{current:os,next:os,fallback:E.some(rs)}],is=function(n,e,t,r,o){return void 0===o&&(o=us),J(o,function(n){return n.current===t}).bind(function(t){return t.current(n,e,r,t.next).orThunk(function(){return t.fallback.bind(function(t){return is(n,e,t,r)})})})},cs=function(){return{sibling:function(n,e){return n.query().prevSibling(e)},first:function(n){return 0<n.length?E.some(n[n.length-1]):E.none()}}},as=function(){return{sibling:function(n,e){return n.query().nextSibling(e)},first:function(n){return 0<n.length?E.some(n[0]):E.none()}}},ls=function(n,e,t,r,o,u){return is(n,e,r,o).bind(function(e){return u(e.item)?E.none():t(e.item)?E.some(e.item):ls(n,e.item,t,e.mode,o,u)})},fs=function(n){return function(e){return 0===n.property().children(e).length}},ss=function(n,e,t,r){return ls(n,e,t,rs,cs(),r)},ds=function(n,e,t,r){return ls(n,e,t,rs,as(),r)},ms=r(),gs=function(n,e){return ss(t=ms,n,fs(t),e);var t},ps=function(n,e){return ds(t=ms,n,fs(t),e);var t},hs=cr([{none:["message"]},{success:[]},{failedUp:["cell"]},{failedDown:["cell"]}]),vs=function(n){return Le(n,"tr")},bs=un(un({},hs),{verify:function(n,e,t,r,o,u,i){return Le(r,"td,th",i).bind(function(t){return Le(e,"td,th",i).map(function(e){return Vn(t,e)?Vn(r,t)&&vr(t)===o?u(e):hs.none("in same cell"):Zt(vs,[t,e]).fold(function(){return o=e,i=t,c=(r=n).getRect(o),(a=r.getRect(i)).right>c.left&&a.left<c.right?hs.success():u(e);var r,o,i,c,a},function(){return u(e)})})}).getOr(hs.none("default"))},cata:function(n,e,t,r,o){return n.fold(e,t,r,o)}}),ws=function(e,t){return Q(e,n(Vn,t))},ys=function(n){return"br"===ae(n)},Cs=function(n,e,t){return e(n,t).bind(function(n){return me(n)&&0===Vt(n).trim().length?Cs(n,e,t):E.some(n)})},Ss=function(n,e,t,r){return xe(o=e,u=t).filter(ys).orThunk(function(){return xe(o,u-1).filter(ys)}).bind(function(e){return r.traverse(e).fold(function(){return Cs(e,r.gather,n).map(r.relative)},function(n){return be(e=n).bind(function(n){var t=Se(n);return ws(t,e).map(function(r){return{parent:n,children:t,element:e,index:r}})}).map(function(n){return uf.on(n.parent,n.index)});var e})});var o,u},xs=function(n,e,t,r){var o,u,i;return(ys(e)?(o=n,u=e,(i=r).traverse(u).orThunk(function(){return Cs(u,i.gather,o)}).map(i.relative)):Ss(n,e,t,r)).map(function(n){return{start:n,finish:n}})},Ts=function(n,e){return{left:n.left,top:n.top+e,right:n.right,bottom:n.bottom+e}},Rs=function(n,e){return{left:n.left,top:n.top-e,right:n.right,bottom:n.bottom-e}},Ds=function(n,e,t){return{left:n.left+e,top:n.top+t,right:n.right+e,bottom:n.bottom+t}},Os=function(n){return{left:n.left,top:n.top,right:n.right,bottom:n.bottom}},As=function(n,e){return E.some(n.getRect(e))},Bs=function(n,e,t){return de(e)?As(n,e).map(Os):me(e)?(r=n,o=e,(0<=(u=t)&&u<vr(o)?r.getRangedRect(o,u,o,u+1):0<u?r.getRangedRect(o,u-1,o,u):E.none()).map(Os)):E.none();var r,o,u},Es=function(n,e){return de(e)?As(n,e).map(Os):me(e)?n.getRangedRect(e,0,e,vr(e)).map(Os):E.none()},Is=cr([{none:[]},{retry:["caret"]}]),Ps=function(n,e,r){return t(function(n,e){return e(n)},_e,e,ga,o).fold(R,function(e){return Es(n,e).exists(function(n){return t=n,(e=r).left<t.left||Math.abs(t.right-e.left)<1||e.left>t.right;var e,t})});var o},ks={point:function(n){return n.bottom},adjuster:function(n,e,t,r,o){var u=Ts(o,5);return Math.abs(t.bottom-r.bottom)<1||t.top>o.bottom?Is.retry(u):t.top===o.bottom?Is.retry(Ts(o,1)):Ps(n,e,o)?Is.retry(Ds(u,5,0)):Is.none()},move:Ts,gather:ps},Ms=function(n,e,t,r,o){return 0===o?E.some(r):(a=n,l=r.left,f=e.point(r),a.elementFromPoint(l,f).filter(function(n){return"table"===ae(n)}).isSome()?(i=r,c=o-1,Ms(n,u=e,t,u.move(i,5),c)):n.situsFromPoint(r.left,e.point(r)).bind(function(u){return u.start.fold(E.none,function(u){return Es(n,u).bind(function(i){return e.adjuster(n,u,i,t,r).fold(E.none,function(r){return Ms(n,e,t,r,o-1)})}).orThunk(function(){return E.some(r)})},E.none)}));var u,i,c,a,l,f},Ns=function(n,e,t){var r,o,u,i=n.move(t,5),c=Ms(e,n,t,i,100).getOr(i);return o=c,u=e,((r=n).point(o)>u.getInnerHeight()?E.some(r.point(o)-u.getInnerHeight()):r.point(o)<0?E.some(-r.point(o)):E.none()).fold(function(){return e.situsFromPoint(c.left,n.point(c))},function(t){return e.scrollBy(0,t),e.situsFromPoint(c.left,n.point(c)-t)})},js={tryUp:n(Ns,{point:function(n){return n.top},adjuster:function(n,e,t,r,o){var u=Rs(o,5);return Math.abs(t.top-r.top)<1||t.bottom<o.top?Is.retry(u):t.bottom===o.top?Is.retry(Rs(o,1)):Ps(n,e,o)?Is.retry(Ds(u,5,0)):Is.none()},move:Rs,gather:gs}),tryDown:n(Ns,ks),ieTryUp:function(n,e){return n.situsFromPoint(e.left,e.top-5)},ieTryDown:function(n,e){return n.situsFromPoint(e.left,e.bottom+5)},getJumpSize:S(5)},_s=function(n,e,t){return n.getSelection().bind(function(r){return xs(e,r.finish,r.foffset,t).fold(function(){return E.some(fc(r.finish,r.foffset))},function(o){var u,i=n.fromSitus(o);return u=bs.verify(n,r.finish,r.foffset,i.finish,i.foffset,t.failure,e),bs.cata(u,function(){return E.none()},function(){return E.none()},function(n){return E.some(fc(n,0))},function(n){return E.some(fc(n,vr(n)))})})})},Ws=function(n,e,t,r,o,u){return 0===u?E.none():Ls(n,e,t,r,o).bind(function(i){var c=n.fromSitus(i),a=bs.verify(n,t,r,c.finish,c.foffset,o.failure,e);return bs.cata(a,function(){return E.none()},function(){return E.some(i)},function(i){return Vn(t,i)&&0===r?zs(n,t,r,Rs,o):Ws(n,e,i,0,o,u-1)},function(i){return Vn(t,i)&&r===vr(i)?zs(n,t,r,Ts,o):Ws(n,e,i,vr(i),o,u-1)})})},zs=function(n,e,t,r,o){return Bs(n,e,t).bind(function(e){return Fs(n,o,r(e,js.getJumpSize()))})},Fs=function(n,e,t){var r=zn().browser;return r.isChrome()||r.isSafari()||r.isFirefox()||r.isEdge()?e.otherRetry(n,t):r.isIE()?e.ieRetry(n,t):E.none()},Ls=function(n,e,t,r,o){return Bs(n,t,r).bind(function(e){return Fs(n,o,e)})},Hs=function(n,e){return _e(n,function(n){return be(n).exists(function(n){return Vn(n,e)})},t).isSome();var t},qs=function(n,e,t,r,o){return Le(r,"td,th",e).bind(function(r){return Le(r,"table",e).bind(function(u){return Hs(o,u)?_s(i=n,c=e,a=t).bind(function(n){return Ws(i,c,n.element,n.offset,a,20).map(i.fromSitus)}).bind(function(n){return Le(n.finish,"td,th",e).map(function(e){return{start:r,finish:e,range:n}})}):E.none();var i,c,a})})},Vs=function(n,e,t,r,o,u){return zn().browser.isIE()?E.none():u(r,e).orThunk(function(){return qs(n,e,t,r,o).map(function(n){var e=n.range;return Yf(E.some(Zf(e.start,e.soffset,e.finish,e.foffset)),!0)})})},Us=function(n,e){return Le(n,"tr",e).bind(function(n){return Le(n,"table",e).bind(function(t){var r=je(t,"tr");return Vn(n,r[0])?ss(ms,t,function(n){return Cr(n).isSome()},e).map(function(n){var e=vr(n);return Yf(E.some(Zf(n,e,n,e)),!0)}):E.none()})})},$s=function(n,e){return Le(n,"tr",e).bind(function(n){return Le(n,"table",e).bind(function(t){var r=je(t,"tr");return Vn(n,r[r.length-1])?ds(ms,t,function(n){return yr(n).isSome()},e).map(function(n){return Yf(E.some(Zf(n,0,n,0)),!0)}):E.none()})})},Gs=function(n,e,t,r,o,u,i){return qs(n,t,r,o,u).bind(function(n){return ns(e,t,n.start,n.finish,i)})},Ks=function(n,e){return Le(n,"td,th",e)},Xs={traverse:Ce,gather:ps,relative:uf.before,otherRetry:js.tryDown,ieRetry:js.ieTryDown,failure:bs.failedDown},Ys={traverse:ye,gather:gs,relative:uf.before,otherRetry:js.tryUp,ieRetry:js.ieTryUp,failure:bs.failedUp},Js=function(n){return function(e){return e===n}},Qs=Js(38),Zs=Js(40),nd=function(n){return 37<=n&&n<=40},ed={isBackward:Js(37),isForward:Js(39)},td={isBackward:Js(39),isForward:Js(37)},rd=function(n){return{elementFromPoint:function(e,t){return Ln.fromPoint(Ln.fromDom(n.document),e,t)},getRect:function(n){return n.dom.getBoundingClientRect()},getRangedRect:function(e,t,r,o){var u=af.exact(e,t,r,o);return Lf(n,u)},getSelection:function(){return Ff(n).map(function(e){return Qf(n,e)})},fromSitus:function(e){var t=af.relative(e.start,e.finish);return Qf(n,t)},situsFromPoint:function(e,t){return Hf(n,e,t).map(function(n){return Jf(n.start,n.soffset,n.finish,n.foffset)})},clearSelection:function(){Ef(n).each(function(n){return n.removeAllRanges()})},collapseSelection:function(e){void 0===e&&(e=!1),Ff(n).each(function(t){return t.fold(function(n){return n.collapse(e)},function(t,r){var o=e?t:r;Nf(n,o,o)},function(t,r,o,u){var i=e?t:o,c=e?r:u;Mf(n,i,c,i,c)})})},setSelection:function(e){Mf(n,e.start,e.soffset,e.finish,e.foffset)},setRelativeSelection:function(e,t){Nf(n,e,t)},selectContents:function(e){zf(n,e)},getInnerHeight:function(){return n.innerHeight},getScrollY:function(){var e,t,r,o;return(e=Ln.fromDom(n.document),t=e!==undefined?e.dom:document,r=t.body.scrollLeft||t.documentElement.scrollLeft,o=t.body.scrollTop||t.documentElement.scrollTop,no(r,o)).top},scrollBy:function(e,t){var r,o,u,i;r=e,o=t,(i=((u=Ln.fromDom(n.document))!==undefined?u.dom:document).defaultView)&&i.scrollBy(r,o)}}},od=function(n,e){return{rows:n,cols:e}},ud=function(n,e,t,r){var o=c(rd(n),e,t,r);return{clearstate:o.clearstate,mousedown:o.mousedown,mouseover:o.mouseover,mouseup:o.mouseup}},id=function(e,t,r,o){var u=rd(e),i=function(){return o.clear(t),E.none()};return{keydown:function(e,c,a,l,f,s){var d=e.raw,m=d.which,g=!0===d.shiftKey;return tr(t,o.selectedSelector).fold(function(){return Zs(m)&&g?n(Gs,u,t,r,Xs,l,c,o.selectRange):Qs(m)&&g?n(Gs,u,t,r,Ys,l,c,o.selectRange):Zs(m)?n(Vs,u,r,Xs,l,c,$s):Qs(m)?n(Vs,u,r,Ys,l,c,Us):E.none},function(n){var e=function(e){return function(){return on(e,function(e){return r=e.rows,u=e.cols,i=t,or(n,r,u,(c=o).firstSelectedSelector,c.lastSelectedSelector).map(function(n){return c.clearBeforeUpdate(i),c.selectRange(i,n.boxes,n.start,n.finish),n.boxes});var r,u,i,c}).fold(function(){return rr(t,o.firstSelectedSelector,o.lastSelectedSelector).map(function(n){var e=Zs(m)||s.isForward(m)?uf.after:uf.before;return u.setRelativeSelection(uf.on(n.first,0),e(n.table)),o.clear(t),Yf(E.none(),!0)})},function(){return E.some(Yf(E.none(),!0))})}};return Zs(m)&&g?e([od(1,0)]):Qs(m)&&g?e([od(-1,0)]):s.isBackward(m)&&g?e([od(0,-1),od(-1,0)]):s.isForward(m)&&g?e([od(0,1),od(1,0)]):nd(m)&&0==g?i:E.none})()},keyup:function(n,e,u,i,c){return tr(t,o.selectedSelector).fold(function(){var a,l,f,s,d,m,g,p=n.raw,h=p.which;return 0!=(!0===p.shiftKey)&&nd(h)?(a=t,l=r,f=e,s=u,d=i,m=c,g=o.selectRange,Vn(f,d)&&s===m?E.none():Le(f,"td,th",l).bind(function(n){return Le(d,"td,th",l).bind(function(e){return ns(a,l,n,e,g)})})):E.none()},E.none)}}},cd=function(n,e,t,r){var o=rd(n);return function(n,u){r.clearBeforeUpdate(e),er(n,u,t).each(function(n){var t=n.boxes.getOr([]);r.selectRange(e,t,n.start,n.finish),o.selectContents(u),o.collapseSelection()})}},ad=function(n,e){G(e,function(e){var t,r;r=e,Vu(t=n)?t.dom.classList.remove(r):$u(t,r),Ku(t)})},ld={byClass:function(n){var e,t,r=(e=n.selected,function(n){Gu(n,e)}),o=(t=[n.selected,n.lastSelected,n.firstSelected],function(n){ad(n,t)}),u=function(e){var t=je(e,n.selectedSelector);G(t,o)};return{clearBeforeUpdate:u,clear:u,selectRange:function(e,t,o,i){u(e),G(t,r),Gu(o,n.firstSelected),Gu(i,n.lastSelected)},selectedSelector:n.selectedSelector,firstSelectedSelector:n.firstSelectedSelector,lastSelectedSelector:n.lastSelectedSelector}},byAttr:function(n,e,t){var r=function(e){Ge(e,n.selected),Ge(e,n.firstSelected),Ge(e,n.lastSelected)},o=function(e){qe(e,n.selected,"1")},u=function(n){i(n),t()},i=function(e){var t=je(e,n.selectedSelector);G(t,r)};return{clearBeforeUpdate:i,clear:u,selectRange:function(t,r,i,c){u(t),G(r,o),qe(i,n.firstSelected,"1"),qe(c,n.lastSelected,"1"),e(r,i,c)},selectedSelector:n.selectedSelector,firstSelectedSelector:n.firstSelectedSelector,lastSelectedSelector:n.lastSelectedSelector}}},fd=function(n,e,t){var r=xt.fromTable(n);return Wc(r,e).map(function(n){var e,o,u,i,c,a,l,f,s,d=Ic(r,t,!1);return{upOrLeftCells:(e=n,o=t,u=d.slice(0,e[e.length-1].row+1),i=kc(u,o),nn(i,function(n){var t=n.cells.slice(0,e[e.length-1].column+1);return $(t,function(n){return n.element})})),downOrRightCells:(a=n,l=t,f=(c=d).slice(a[0].row+a[0].rowspan-1,c.length),s=kc(f,l),nn(s,function(n){var e=n.cells.slice(a[0].column+a[0].colspan-1,n.cells.length);return $(e,function(n){return n.element})}))}})},sd=function(n){return!1===Xu(Ln.fromDom(n.target),"ephox-snooker-resizer-bar")},dd=function(n,e){var t=Xi(E.none()),r=Xi([]),o=function(){return Qa(Ki(n)).bind(function(n){return pt(n).map(function(t){return"caption"===ae(n)?Wr(n):zr(e,t,n)})})},u=function(){t.set(cn(o)()),G(r.get(),function(n){return n()})},i=function(n,e){var o=function(){return t.get().fold(function(){n.setDisabled(!0)},function(t){n.setDisabled(e(t))})};return o(),r.set(r.get().concat([o])),function(){r.set(K(r.get(),function(n){return n!==o}))}};return n.on("NodeChange ExecCommand TableSelectorChange",u),{onSetupTable:function(n){return i(n,function(){return!1})},onSetupCellOrRow:function(n){return i(n,function(n){return"caption"===ae(n.element)})},onSetupPasteable:function(n){return function(e){return i(e,function(e){return"caption"===ae(e.element)||n().isNone()})}},onSetupMergeable:function(n){return i(n,function(n){return n.mergable.isNone()})},onSetupUnmergeable:function(n){return i(n,function(n){return n.unmergable.isNone()})},resetTargets:u,targets:function(){return t.get()}}},md=function(n,e,t){n.ui.registry.addMenuButton("table",{tooltip:"Table",icon:"table",fetch:function(n){return n("inserttable | cell row column | advtablesort | tableprops deletetable")}});var r=function(e){return function(){return n.execCommand(e)}};n.ui.registry.addButton("tableprops",{tooltip:"Table properties",onAction:r("mceTableProps"),icon:"table",onSetup:e.onSetupTable}),n.ui.registry.addButton("tabledelete",{tooltip:"Delete table",onAction:r("mceTableDelete"),icon:"table-delete-table",onSetup:e.onSetupTable}),n.ui.registry.addButton("tablecellprops",{tooltip:"Cell properties",onAction:r("mceTableCellProps"),icon:"table-cell-properties",onSetup:e.onSetupCellOrRow}),n.ui.registry.addButton("tablemergecells",{tooltip:"Merge cells",onAction:r("mceTableMergeCells"),icon:"table-merge-cells",onSetup:e.onSetupMergeable}),n.ui.registry.addButton("tablesplitcells",{tooltip:"Split cell",onAction:r("mceTableSplitCells"),icon:"table-split-cells",onSetup:e.onSetupUnmergeable}),n.ui.registry.addButton("tableinsertrowbefore",{tooltip:"Insert row before",onAction:r("mceTableInsertRowBefore"),icon:"table-insert-row-above",onSetup:e.onSetupCellOrRow}),n.ui.registry.addButton("tableinsertrowafter",{tooltip:"Insert row after",onAction:r("mceTableInsertRowAfter"),icon:"table-insert-row-after",onSetup:e.onSetupCellOrRow}),n.ui.registry.addButton("tabledeleterow",{tooltip:"Delete row",onAction:r("mceTableDeleteRow"),icon:"table-delete-row",onSetup:e.onSetupCellOrRow}),n.ui.registry.addButton("tablerowprops",{tooltip:"Row properties",onAction:r("mceTableRowProps"),icon:"table-row-properties",onSetup:e.onSetupCellOrRow}),n.ui.registry.addButton("tableinsertcolbefore",{tooltip:"Insert column before",onAction:r("mceTableInsertColBefore"),icon:"table-insert-column-before",onSetup:e.onSetupCellOrRow}),n.ui.registry.addButton("tableinsertcolafter",{tooltip:"Insert column after",onAction:r("mceTableInsertColAfter"),icon:"table-insert-column-after",onSetup:e.onSetupCellOrRow}),n.ui.registry.addButton("tabledeletecol",{tooltip:"Delete column",onAction:r("mceTableDeleteCol"),icon:"table-delete-column",onSetup:e.onSetupCellOrRow}),n.ui.registry.addButton("tablecutrow",{tooltip:"Cut row",icon:"cut-row",onAction:r("mceTableCutRow"),onSetup:e.onSetupCellOrRow}),n.ui.registry.addButton("tablecopyrow",{tooltip:"Copy row",icon:"duplicate-row",onAction:r("mceTableCopyRow"),onSetup:e.onSetupCellOrRow}),n.ui.registry.addButton("tablepasterowbefore",{tooltip:"Paste row before",icon:"paste-row-before",onAction:r("mceTablePasteRowBefore"),onSetup:e.onSetupPasteable(t.getRows)}),n.ui.registry.addButton("tablepasterowafter",{tooltip:"Paste row after",icon:"paste-row-after",onAction:r("mceTablePasteRowAfter"),onSetup:e.onSetupPasteable(t.getRows)}),n.ui.registry.addButton("tablecutcol",{tooltip:"Cut column",icon:"cut-column",onAction:r("mceTableCutCol"),onSetup:e.onSetupCellOrRow}),n.ui.registry.addButton("tablecopycol",{tooltip:"Copy column",icon:"duplicate-column",onAction:r("mceTableCopyCol"),onSetup:e.onSetupCellOrRow}),n.ui.registry.addButton("tablepastecolbefore",{tooltip:"Paste column before",icon:"paste-column-before",onAction:r("mceTablePasteColBefore"),onSetup:e.onSetupPasteable(t.getColumns)}),n.ui.registry.addButton("tablepastecolafter",{tooltip:"Paste column after",icon:"paste-column-after",onAction:r("mceTablePasteColAfter"),onSetup:e.onSetupPasteable(t.getColumns)}),n.ui.registry.addButton("tableinsertdialog",{tooltip:"Insert table",onAction:r("mceInsertTable"),icon:"table"})},gd=function(n){var e=n.getParam("table_toolbar","tableprops tabledelete | tableinsertrowbefore tableinsertrowafter tabledeleterow | tableinsertcolbefore tableinsertcolafter tabledeletecol");0<e.length&&n.ui.registry.addContextToolbar("table",{predicate:function(e){return n.dom.is(e,"table")&&n.getBody().contains(e)},items:e,scope:"node",position:"node"})},pd=function(n,e,t){var r=function(e){return function(){return n.execCommand(e)}},o=function(e){var t=e.numRows,r=e.numColumns;n.undoManager.transact(function(){cl(n,r,t,0,0)}),n.addVisual()},u={text:"Table properties",onSetup:e.onSetupTable,onAction:r("mceTableProps")},i={text:"Delete table",icon:"table-delete-table",onSetup:e.onSetupTable,onAction:r("mceTableDelete")};n.ui.registry.addMenuItem("tableinsertrowbefore",{text:"Insert row before",icon:"table-insert-row-above",onAction:r("mceTableInsertRowBefore"),onSetup:e.onSetupCellOrRow}),n.ui.registry.addMenuItem("tableinsertrowafter",{text:"Insert row after",icon:"table-insert-row-after",onAction:r("mceTableInsertRowAfter"),onSetup:e.onSetupCellOrRow}),n.ui.registry.addMenuItem("tabledeleterow",{text:"Delete row",icon:"table-delete-row",onAction:r("mceTableDeleteRow"),onSetup:e.onSetupCellOrRow}),n.ui.registry.addMenuItem("tablerowprops",{text:"Row properties",icon:"table-row-properties",onAction:r("mceTableRowProps"),onSetup:e.onSetupCellOrRow}),n.ui.registry.addMenuItem("tablecutrow",{text:"Cut row",icon:"cut-row",onAction:r("mceTableCutRow"),onSetup:e.onSetupCellOrRow}),n.ui.registry.addMenuItem("tablecopyrow",{text:"Copy row",icon:"duplicate-row",onAction:r("mceTableCopyRow"),onSetup:e.onSetupCellOrRow}),n.ui.registry.addMenuItem("tablepasterowbefore",{text:"Paste row before",icon:"paste-row-before",onAction:r("mceTablePasteRowBefore"),onSetup:e.onSetupPasteable(t.getRows)}),n.ui.registry.addMenuItem("tablepasterowafter",{text:"Paste row after",icon:"paste-row-after",onAction:r("mceTablePasteRowAfter"),onSetup:e.onSetupPasteable(t.getRows)}),n.ui.registry.addMenuItem("tableinsertcolumnbefore",{text:"Insert column before",icon:"table-insert-column-before",onAction:r("mceTableInsertColBefore"),onSetup:e.onSetupCellOrRow}),n.ui.registry.addMenuItem("tableinsertcolumnafter",{text:"Insert column after",icon:"table-insert-column-after",onAction:r("mceTableInsertColAfter"),onSetup:e.onSetupCellOrRow}),n.ui.registry.addMenuItem("tabledeletecolumn",{text:"Delete column",icon:"table-delete-column",onAction:r("mceTableDeleteCol"),onSetup:e.onSetupCellOrRow}),n.ui.registry.addMenuItem("tablecutcolumn",{text:"Cut column",icon:"cut-column",onAction:r("mceTableCutCol"),onSetup:e.onSetupCellOrRow}),n.ui.registry.addMenuItem("tablecopycolumn",{text:"Copy column",icon:"duplicate-column",onAction:r("mceTableCopyCol"),onSetup:e.onSetupCellOrRow}),n.ui.registry.addMenuItem("tablepastecolumnbefore",{text:"Paste column before",icon:"paste-column-before",onAction:r("mceTablePasteColBefore"),onSetup:e.onSetupPasteable(t.getColumns)}),n.ui.registry.addMenuItem("tablepastecolumnafter",{text:"Paste column after",icon:"paste-column-after",onAction:r("mceTablePasteColAfter"),onSetup:e.onSetupPasteable(t.getColumns)}),n.ui.registry.addMenuItem("tablecellprops",{text:"Cell properties",icon:"table-cell-properties",onAction:r("mceTableCellProps"),onSetup:e.onSetupCellOrRow}),n.ui.registry.addMenuItem("tablemergecells",{text:"Merge cells",icon:"table-merge-cells",onAction:r("mceTableMergeCells"),onSetup:e.onSetupMergeable}),n.ui.registry.addMenuItem("tablesplitcells",{text:"Split cell",icon:"table-split-cells",onAction:r("mceTableSplitCells"),onSetup:e.onSetupUnmergeable}),!1===n.getParam("table_grid",!0,"boolean")?n.ui.registry.addMenuItem("inserttable",{text:"Table",icon:"table",onAction:r("mceInsertTable")}):n.ui.registry.addNestedMenuItem("inserttable",{text:"Table",icon:"table",getSubmenuItems:function(){return[{type:"fancymenuitem",fancytype:"inserttable",onAction:o}]}}),n.ui.registry.addMenuItem("inserttabledialog",{text:"Insert table",icon:"table",onAction:r("mceInsertTable")}),n.ui.registry.addMenuItem("tableprops",u),n.ui.registry.addMenuItem("deletetable",i),n.ui.registry.addNestedMenuItem("row",{type:"nestedmenuitem",text:"Row",getSubmenuItems:function(){return"tableinsertrowbefore tableinsertrowafter tabledeleterow tablerowprops | tablecutrow tablecopyrow tablepasterowbefore tablepasterowafter"}}),n.ui.registry.addNestedMenuItem("column",{type:"nestedmenuitem",text:"Column",getSubmenuItems:function(){return"tableinsertcolumnbefore tableinsertcolumnafter tabledeletecolumn | tablecutcolumn tablecopycolumn tablepastecolumnbefore tablepastecolumnafter"}}),n.ui.registry.addNestedMenuItem("cell",{type:"nestedmenuitem",text:"Cell",getSubmenuItems:function(){return"tablecellprops tablemergecells tablesplitcells"}}),n.ui.registry.addContextMenu("table",{update:function(){return e.resetTargets(),e.targets().fold(function(){return""},function(n){return"caption"===ae(n.element)?"tableprops deletetable":"cell row column | advtablesort | tableprops deletetable"})}})};gr.add("table",l)}();